{"version":3,"sources":["images/ico.png","images/error-404.png","constants/alert_constants.js","constants/user_constants.js","actions/alert_actions.js","config/index.js","helpers/auth-headers.js","helpers/history.js","reducers/auth_reducer.js","reducers/index.js","reducers/registration_reducer.js","reducers/alert_reducer.js","reducers/rating_reducer.js","reducers/playlist_film_reducer.js","helpers/store.js","services/user_service.js","actions/user_actions.js","components/Navbar/NavbarComponent.js","components/Playlist/PlaylistAddComponent.js","components/Playlist/PlaylistAddButtonComponent.js","components/Home/HomeComponent.js","components/Film/FilmsPreviewComponent.js","components/Playlist/PlaylistComponent.js","components/Comments/CommentsComponent.js","components/Film/FilmComponent.js","components/Login/LoginComponent.js","components/Register/RegisterComponent.js","components/Search/SearchComponent.js","components/Playlist/AllPlaylistsComponent.js","components/AddFilm/AddFilmComponent.js","components/NotFound/NotFoundComponent.js","components/ResetPassword/ResetPasswordComponent.js","components/ResetPassword/ForgotPasswordComponent.js","helpers/PrivateRoute.js","components/Profile/ProfileComponent.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","alertConstants","SUCCESS","ERROR","CLEAR","userConstants","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","RATED","PLAYLIST_FILM_ACTION","alertActions","success","message","type","error","clear","config","apiUrl","pathName","authHeader","user","JSON","parse","localStorage","getItem","token","Authorization","loginHeader","username","password","loginToken","window","btoa","console","log","history","createBrowserHistory","initialState","loggedIn","reducer","combineReducers","auth","state","arguments","length","undefined","action","loggingIn","registration","registering","alert","rate","rated","meta","playlistFilm","operation","store","createLogger","createStore","applyMiddleware","thunkMiddleware","userService","login","requestOptions","method","headers","fetch","concat","then","handleResponse","setItem","stringify","logout","register","Content-Type","body","removeItem","response","text","data","ok","status","errors","statusText","Promise","reject","userActions","dispatch","goBack","failure","toString","request","NavbarComponent","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleProfileMenuOpen","event","setState","anchorEl","currentTarget","handleProfileMenuClose","handleLogoutClick","handleProfileClick","push","title","handleSearchSubmit","bind","assertThisInitialized","handleChange","eventKey","e","value","target","_this2","preventDefault","search","document","getElementById","reset","axios","get","result","films","pathname","_id","catch","err","_this3","isProfileMenuOpen","Boolean","renderProfileMenu","react_default","a","createElement","Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","open","onClose","MenuItem_default","key","style","display","onClick","Navbar","expand","bg","variant","onSelect","k","handleSelect","Col","xs","span","order","sm","md","Brand","href","alt","src","ico","width","height","className","Form","id","onSubmit","inline","FormControl","vaule","onChange","placeholder","Button","index_es","icon","Toggle","aria-controls","onToggle","handleToggle","Collapse","Nav","activeKey","Link","Avatar_default","nick","toUpperCase","charAt","location","Component","connectedCustomNavbar","connect","enhanceWithClickOutside","require","PlaylistAddComponent","handleClick","requestParams","filmID","post","res","filmTitle","handlePlaylistOperation","errorMessage","loadPlaylist","isLoading","playlists","forEach","playlist","indexOf","contains","loaded","show","values","playlistID","menuRef","React","createRef","index","playlisID","array","put","prevProps","prevState","snapshot","handleClickOutside","parentName","innerWidth","innerHeight","drop","contentHeight","current","getBoundingClientRect","tmpHeightBottom","top","tmpHeightTop","alignRight","Dropdown","ref","Menu","overflowY","Divider","map","Row","Check","custom","checked","label","isInvalid","Control","Feedback","connectedPlaylistAddComponent","PlaylistAddButtonComponent","size","handleAddPlaylistButtonClick","opacity","connectedPlaylistAddButtonComponent","HomeComponent","handleScroll","addOpenedIndex","isMobile","add","scroll","scrollTop","documentElement","offsetHeight","_assertThisInitialize","loadData","_assertThisInitialize2","hasMore","handleResize","windowWidth","film","note","handleCreatePlaylistClick","handleClose","reason","params","start","limit","toConsumableArray","setRedirect","redirect","clickedOutside","addEventListener","Math","ceil","removeEventListener","lg","thumbnail","lib_default","line","position","right","author_name","views","Button_default","disabled","Spinner","animation","Snackbar_default","autoHideDuration","ContentProps","aria-describedby","connectedHomePage","source","CancelToken","FilmsPreviewComponent","loadFilms","t","Date","now","handleLoading","exclude","maxSize","isLoaded","localName","parentElement","handleThumbnail","openSnackbar","handleCloseSnackbar","cancel","cancelToken","isCancel","Snackbar_Snackbar_default","connectedFilmPage","PlaylistComponent","handleSubmit","playlistHeight","filmElement","clientHeight","playlistHeaderHeight","playlistHeader","loadFilm","playlistFilms","requests","currentFilm","all","isPlaylistLoaded","checkOwnerOfPlaylist","ownerOfPlaylist","handleRemoveFromPlaylist","handleRemovePlaylist","delete","handleDeletePlaylist","findIndex","_this4","lines","react_perfect_scrollbar_lib_default","onYReachEnd","onScrollY","fontWeight","connectedPlaylistPage","CommentsComponent","loadComments","comments","addComment","comment","author_id","unshift","author","createdAt","addedCount","sortComments","path","dir","commentsLength","TextField_default","multiline","fullWidth","rowsMax","DropdownButton","Item","date","getDay","slice","getMonth","getFullYear","getHours","getMinutes","displayDate","windowBreakpoint","FilmComponent","isLoadingFilms","hasMoreFilms","isLoadingComments","queryString","list","updateMeta","options","defineProperty","objectSpread","dislikes","thumbsDown","likes","thumbsUp","checkRate","liked","disliked","handleSetThumbnail","poster","scrollTo","handleSetThumbnailPlaylist","match","handleLoadingFilms","_State","handleLoadingComments","displayPlaylist","isMounted","expanded","truncated","handleTruncate","toggleLines","description","videoSrc","_this$state","video_react_lib","playsInline","cursor","truncateText","textTruncateChild","CommentsComponent_connectedFilmPage","LoginComponent","handleForgotPassword","setTimeout","email","submitted","_e$target","name","modalClose","_this$state2","Modal","onHide","aria-labelledby","centered","Header","closeButton","Title","Body","Group","Label","htmlFor","Footer","connectedLoginPage","RegisterComponent","maxLength","connectedRegisterPage","filters","SearchComponent","sort","filter","parseDate","today","time","abs","floor","UTC","getDate","handleOnclick","click","sorts","onresize","prevParams","_","isEqual","parseInt","aria-expanded","in","fontSize","Truncate","connectedSearchPage","AllPlaylistsComponent","filmThumbnail","authorName","connectedAllPlaylistsComponent","CHOOSE_FILM","CHOOSE_THUMBNAIL","AddFilmComponent","handleDropFilm","files","filmName","filmPreview","URL","createObjectURL","handleDropThumbnail","thumbnailName","thumbnailPreview","filmInput","thumbnailInput","handleFileChoose","FormData","set","FileDrop","onDrop","accept","muted","autoPlay","aria-label","as","connectedAddPage","NotFoundComponent","error_404","ResetPasswordComponent","resetRequested","resetSuccessful","resetError","handleSubmitPasswordChange","Alert","connectedResetPasswordComponent","ForgotPasswordComponent","emailSending","emailSend","emailError","handleSubmitForgotRequest","connectedForgotPasswordComponent","PrivateRoute","_ref","component","rest","objectWithoutProperties","react_router","assign","render","to","from","ProfileComponent","splice","handleRemoveFilm","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","stop","connectedProfileComponent","library","faSearch","faPlus","faThumbsUp","faThumbsDown","faEye","faPlay","faFilter","faCaretUp","faCaretDown","faEllipsisV","faSortDown","faSortUp","faTrashAlt","App","listen","exact","PrivateRoute_PrivateRoute","connectedApp","hostname","ReactDOM","react_redux_es","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.b1af013f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ico.f5c2ef23.png\";","module.exports = __webpack_public_path__ + \"static/media/error-404.edab0e16.png\";","export const alertConstants = {\r\n\r\n    SUCCESS: 'ALERT_SUCCESS',\r\n    ERROR: 'ALERT_ERROR',\r\n    CLEAR: 'ALERT_CLEAR'\r\n    \r\n};","export const userConstants = {\r\n\r\n    REGISTER_REQUEST: 'USER_REGISTER_REQUEST',\r\n    REGISTER_SUCCESS: 'USER_REGISTER_SUCCESS',\r\n    REGISTER_FAILURE: 'USER_REGISTER_FAILURE',\r\n\r\n    LOGIN_REQUEST: 'USER_LOGIN_REQUEST',\r\n    LOGIN_SUCCESS: 'USER_LOGIN_SUCCESS',\r\n    LOGIN_FAILURE: 'USER_LOGIN_FAILURE',\r\n\r\n    LOGOUT: 'USER_LOGOUT',\r\n\r\n    RATED: 'FILM_RATED',\r\n\r\n    PLAYLIST_FILM_ACTION: 'USER_PLAYLIST_FILM_ACTION'\r\n\r\n};","import { alertConstants } from \"../constants\";\r\n\r\n\r\nexport const alertActions = {\r\n    success,\r\n    error,\r\n    clear\r\n};\r\n\r\nfunction success(message) {\r\n    return { type: alertConstants.SUCCESS, message };\r\n}\r\n\r\nfunction error(message) {\r\n    return { type: alertConstants.ERROR, message };\r\n}\r\n\r\nfunction clear() {\r\n    return { type: alertConstants.CLEAR };\r\n}","export const config = {\r\n    apiUrl: 'https://my-film-app.herokuapp.com/api/',\r\n    pathName: '/filmapp_frontend/'\r\n};","export function authHeader() {\r\n\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n\r\n    if(user && user.token){\r\n        return { 'Authorization' : 'Bearer ' + user.token};\r\n    } else{\r\n        return {};\r\n    }\r\n}\r\n\r\nexport function loginHeader(username, password){\r\n    let loginToken = window.btoa(username + ':' + password);\r\n    console.log(\"LOGIN TOKENNNNNNNNNNNNN\")\r\n    console.log(loginToken)\r\n    return { 'Authorization':  'Basic ' +  loginToken };\r\n\r\n}","import { createBrowserHistory } from 'history';\r\n\r\nexport  const history = createBrowserHistory();","import { userConstants} from \"../constants\";\r\n\r\nlet user = JSON.parse(localStorage.getItem('user'));\r\nconst initialState = user ? { loggedIn: true, user } : {};\r\n\r\nexport function auth(state = initialState, action) {\r\n    switch (action.type) {\r\n        case userConstants.LOGIN_REQUEST:\r\n            return {\r\n                loggingIn: true,\r\n                user: action.user\r\n            };\r\n        case userConstants.LOGIN_SUCCESS:\r\n            return {\r\n                loggedIn: true,\r\n                user: action.user\r\n            };\r\n        case userConstants.LOGIN_FAILURE:\r\n            return {};\r\n        case userConstants.LOGOUT:\r\n            return {};\r\n        default:\r\n            return state\r\n    }\r\n\r\n}","import { combineReducers } from \"redux\";\r\n\r\nimport { auth} from \"./auth_reducer\";\r\nimport { registration} from \"./registration_reducer\";\r\nimport { alert } from \"./alert_reducer\";\r\nimport { rate } from \"./rating_reducer\";\r\nimport { playlistFilm } from \"./playlist_film_reducer\";\r\n\r\nconst reducer = combineReducers({\r\n    auth,\r\n    registration,\r\n    alert,\r\n    rate,\r\n    playlistFilm\r\n});\r\n\r\nexport default reducer;","import { userConstants} from \"../constants\";\r\n\r\nexport function registration(state = {}, action){\r\n    switch (action.type) {\r\n        case userConstants.REGISTER_REQUEST:\r\n            return { registering: true };\r\n        case userConstants.REGISTER_SUCCESS:\r\n            return {};\r\n        case userConstants.REGISTER_FAILURE:\r\n            return {};\r\n        default:\r\n            return state\r\n    }\r\n}","import { alertConstants } from '../constants';\r\n\r\nexport function alert(state = {}, action) {\r\n    switch (action.type) {\r\n        case alertConstants.SUCCESS:\r\n            return{\r\n                type: 'alert-reducer',\r\n                message: action.message\r\n            };\r\n        case alertConstants.ERROR:\r\n            return{\r\n                type: 'alert-danger',\r\n                message: action.message\r\n            };\r\n        case alertConstants.CLEAR:\r\n            return {};\r\n        default:\r\n            return state\r\n    }\r\n}","import { userConstants } from \"../constants\";\r\n\r\nexport function rate(state = {}, action) {\r\n\r\n    switch (action.type) {\r\n        case userConstants.RATED:\r\n            return { rated: action.meta};\r\n        default:\r\n           return state\r\n    }\r\n}","import { userConstants } from \"../constants\";\r\n\r\nexport function playlistFilm(state = {}, action) {\r\n\r\n    switch (action.type) {\r\n        case userConstants.PLAYLIST_FILM_ACTION:\r\n            return { playlistFilm: action.operation};\r\n        default:\r\n            return state\r\n    }\r\n}","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { createLogger } from 'redux-logger';\r\nimport reducer from '../reducers'\r\n\r\n// eslint-disable-next-line\r\nconst loggerMiddleware = createLogger();\r\n\r\nexport const store = createStore(\r\n    reducer,\r\n    applyMiddleware(\r\n        thunkMiddleware\r\n    )\r\n);","import { config } from '../config'\r\nimport { loginHeader } from '../helpers';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register\r\n};\r\n\r\nfunction login(username, password) {\r\n\r\n    let loginHeaderMy =  loginHeader(username, password);\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: loginHeaderMy\r\n\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/auth`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user;\r\n        })\r\n}\r\n\r\nfunction logout(){\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n    return fetch(`${config.apiUrl}/users/`, requestOptions)\r\n        .then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if(!response.ok){\r\n            if(response.status === 401){\r\n                logout();\r\n            }\r\n            const error = (data && data.errors) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    })\r\n}\r\n\r\n","import { userConstants } from \"../constants\";\r\nimport { userService } from \"../services/user_service\";\r\nimport { alertActions } from \"./alert_actions\";\r\nimport { history } from \"../helpers\";\r\n\r\nexport const userActions = {\r\n    login,\r\n    logout,\r\n    register,\r\n    rate,\r\n    playlistFilm\r\n};\r\n\r\nfunction login(username, password) {\r\n    return dispatch => {\r\n        dispatch(request({username}));\r\n\r\n        userService.login(username, password)\r\n            .then(user => {\r\n                dispatch(success(user));\r\n                dispatch(userActions.rate('CHECK_RATE'));\r\n                history.goBack();\r\n            },\r\n            error =>{\r\n                dispatch(failure(error.toString()));\r\n                dispatch(alertActions.error(error.toString()));\r\n            }\r\n        );\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.LOGIN_REQUEST, user}}\r\n    function success(user) { return { type: userConstants.LOGIN_SUCCESS, user }}\r\n    function failure(error) {return { type: userConstants.LOGIN_FAILURE, error }}\r\n}\r\n\r\nfunction logout() {\r\n    userService.logout();\r\n    return { type: userConstants.LOGOUT }\r\n}\r\n\r\nfunction register(user) {\r\n    return dispatch => {\r\n        dispatch(request(user));\r\n\r\n        userService.register(user)\r\n            .then(\r\n\r\n                user => {\r\n                    dispatch(success());\r\n                    dispatch(alertActions.success('Registration successful'));\r\n                    history.goBack();\r\n                },\r\n                error => {\r\n                    dispatch(failure(error.toString()));\r\n                    dispatch(alertActions.error(error.toString()));\r\n                }\r\n            )\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.REGISTER_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.REGISTER_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.REGISTER_FAILURE, error } }\r\n\r\n}\r\n\r\n\r\nfunction rate(meta) {\r\n\r\n    return dispatch => {\r\n        dispatch(request(meta));\r\n\r\n    };\r\n\r\n    function request(meta) { return { type: userConstants.RATED, meta } }\r\n\r\n}\r\n\r\nfunction playlistFilm(action) {\r\n\r\n    return dispatch => {\r\n        dispatch(operation(action));\r\n    };\r\n\r\n    function operation(operation) { return { type: userConstants.PLAYLIST_FILM_ACTION, operation } }\r\n}\r\n\r\n","import React, {Component} from 'react';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nimport {Button, Col, Form, FormControl, Nav, Navbar} from 'react-bootstrap';\r\nimport {userActions} from \"../../actions\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport axios from 'axios'\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport './NavbarComponent.css';\r\nimport Menu from \"@material-ui/core/Menu/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem/MenuItem\";\r\n\r\nimport ico from '../../images/ico.png';\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass NavbarComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            title: '',\r\n            anchorEl: null,\r\n        };\r\n\r\n        this.handleSearchSubmit = this.handleSearchSubmit.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n    }\r\n\r\n    handleSelect(eventKey) {\r\n        if (eventKey === 'login') {\r\n            if (this.props.loggedIn) {\r\n                this.props.dispatch(userActions.logout());\r\n            }\r\n        } else if (eventKey === 'add_film') {\r\n            this.props.history.push(`${pathName}add`);\r\n\r\n        }else if (eventKey === 'playlists'){\r\n            this.props.history.push(`${pathName}playlists`)\r\n        }\r\n    }\r\n\r\n    handleChange(e) {\r\n        const {value} = e.target;\r\n        this.setState({\r\n            title: value\r\n        });\r\n\r\n    }\r\n\r\n    handleSearchSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        const search = this.state.title;\r\n        this.setState({title: ''});\r\n\r\n        document.getElementById(\"search-form\").reset();\r\n\r\n\r\n        axios.get(`${config.apiUrl}films/filter/title?search=${search}&p=1`)\r\n            .then(result => {\r\n\r\n\r\n                const films = result.data;\r\n                if (films.length === 0) {\r\n\r\n                    this.props.history.push({\r\n                        pathname: `${pathName}search`,\r\n                        search: `?search=${search}`,\r\n                        state: {films: films}\r\n                    });\r\n\r\n                } else if (films.length === 1) {\r\n                    this.props.history.push(`${pathName}film/${films[0]._id}`);\r\n\r\n                } else {\r\n\r\n\r\n                    this.props.history.push({\r\n                        pathname: `${pathName}search`,\r\n                        search: `?search=${search}`,\r\n                        state: {films: films}\r\n                    });\r\n\r\n\r\n                }\r\n\r\n\r\n            }).catch(err => {\r\n\r\n        });\r\n\r\n    }\r\n\r\n    handleProfileMenuOpen = event => {\r\n        this.setState({ anchorEl: event.currentTarget });\r\n    };\r\n\r\n    handleProfileMenuClose = () => {\r\n        this.setState({ anchorEl: null });\r\n    };\r\n\r\n    handleLogoutClick = () => {\r\n        this.setState({ anchorEl: null });\r\n\r\n        this.props.dispatch(userActions.rate(''));\r\n        this.props.dispatch(userActions.logout());\r\n    };\r\n\r\n    handleProfileClick = () => {\r\n        this.setState({ anchorEl: null });\r\n        this.props.history.push(`${pathName}profile`);\r\n    };\r\n\r\n    render() {\r\n\r\n        const {loggedIn} = this.props;\r\n        const {anchorEl} = this.state;\r\n        const isProfileMenuOpen = Boolean(anchorEl);\r\n        const renderProfileMenu = (\r\n            <Menu\r\n                anchorEl={anchorEl}\r\n                anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n                open={isProfileMenuOpen}\r\n                onClose={this.handleProfileMenuClose}\r\n            >\r\n                <MenuItem key=\"placeholder\" style={{display: \"none\"}}/>\r\n                <MenuItem onClick={this.handleProfileClick}>Profile</MenuItem>\r\n                <MenuItem onClick={this.handleLogoutClick}>Logout</MenuItem>\r\n            </Menu>\r\n        );\r\n\r\n        return (\r\n\r\n            <Navbar\r\n                    expand=\"md\" bg=\"light\" variant=\"light\"\r\n                    onSelect={k => this.handleSelect(k)}>\r\n\r\n                <Col xs={{span: 6, order: 1}} sm={{span: 2, order: 1}} md={{span: 4, order: 1}}>\r\n                    <Navbar.Brand href={pathName}>\r\n                        <Navbar.Brand>\r\n                            {\r\n                                <img alt=\"\"\r\n                                     src={ico} width=\"30\"\r\n                                     height=\"30\"/>\r\n                            }\r\n                        </Navbar.Brand>\r\n                        {<p className=\"d-none d-md-inline\">FilmApp</p>}\r\n                    </Navbar.Brand>\r\n                </Col>\r\n\r\n                <Col xs={{span: 12, order: 12}} sm={{span: 8, order: 2}} md={{span: 5, order: 5}}>\r\n                    <Form id=\"search-form\" onSubmit={this.handleSearchSubmit} inline>\r\n                        <FormControl vaule={this.state.title} onChange={this.handleChange} type=\"text\"\r\n                                     placeholder=\"Search\"/>\r\n                        <Button onClick={this.handleSearchSubmit} className=\"d-none d-sm-inline ml-1\"\r\n                                variant=\"light\"><FontAwesomeIcon icon=\"search\"/></Button>\r\n                    </Form>\r\n                </Col>\r\n\r\n                <Col className=\"text-right d-md-none\" xs={{span: 6, order: 7}} sm={{span: 2, order: 10}}>\r\n                    <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" onToggle={this.handleToggle}/>\r\n                </Col>\r\n\r\n                <Col xs={{span: 12, order: 12}} sm={{span: 12, order: 12}} md={{span: 3, order: 9}}>\r\n\r\n                    <Navbar.Collapse className=\"justify-content-end\" id=\"responsive-navbar-nav\">\r\n\r\n                        <Nav activeKey=\"\">\r\n                            <Nav.Link className=\"pr-2 pl-2\" eventKey=\"playlists\">Playlists</Nav.Link>\r\n                            <Nav.Link className=\"pr-2 pl-2\" eventKey=\"add_film\">Add</Nav.Link>\r\n\r\n\r\n                            {\r\n                                loggedIn ?\r\n                                    (\r\n\r\n                                        <Avatar onClick={this.handleProfileMenuOpen}\r\n                                                className=\"pr-2 pl-2 custom-avatar button-my\">{\r\n                                            JSON.parse(localStorage.getItem('user')).user.nick.toUpperCase().charAt(0)}</Avatar>\r\n\r\n                                        ) :\r\n                                    (<Nav.Link onClick={() => {\r\n                                        if (this.props.location.pathname === '/filmapp_frontend/')\r\n                                            this.props.history.push(`${pathName}login`);\r\n                                        else\r\n                                            this.props.history.push(`${this.props.location.pathname}/login${this.props.location.search}`)\r\n                                    }\r\n                                    } className=\"pr-2 pl-2\" eventKey=\"login\">Login</Nav.Link>)\r\n                            }\r\n                        </Nav>\r\n\r\n                    </Navbar.Collapse>\r\n\r\n                </Col>\r\n\r\n                {renderProfileMenu}\r\n\r\n            </Navbar>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedCustomNavbar = connect(mapStateToProps)(NavbarComponent);\r\nexport {connectedCustomNavbar as NavbarComponent};","import React, {Component} from 'react';\r\nimport {Button, Col, Dropdown, Form, FormControl, Row} from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport {config} from \"../../config\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport {userActions} from \"../../actions\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\n\r\nconst enhanceWithClickOutside = require('react-click-outside');\r\n\r\nclass PlaylistAddComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n\r\n            show: false,\r\n\r\n            isLoading: true,\r\n            loaded: false,\r\n\r\n            playlists: [],\r\n\r\n            values: [],\r\n            title: '',\r\n\r\n            error: false,\r\n            errorMessage: '',\r\n\r\n            playlistID: null\r\n        };\r\n        this.menuRef = React.createRef();\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleChange(event, index, playlisID) {\r\n        let array = this.state.playlists;\r\n        array[index].contains = !array[index].contains;\r\n\r\n        this.setState({playlists: array});\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        const body = {films: [this.props.filmID]};\r\n        console.log(event.target);\r\n        console.log(index);\r\n\r\n        let message = \"\";\r\n\r\n        if (array[index].contains === false) {\r\n            axios.put(`${config.apiUrl}playlists/${playlisID}/films/delete/`, body, requestParams)\r\n                .then(res => {\r\n                    const filmTitle = this.props.filmTitle ? this.props.filmTitle : '';\r\n                    message = `Deleted film ${filmTitle} from playlist!`;\r\n                    if(this.state.playlistID && this.state.playlistID === playlisID)\r\n                        this.props.dispatch(userActions.playlistFilm('DELETED'));\r\n                    this.props.handlePlaylistOperation(message);\r\n\r\n\r\n                }).catch(err => {\r\n                console.log(err);\r\n            })\r\n        } else {\r\n            axios.put(`${config.apiUrl}playlists/${playlisID}/films/`, body, requestParams)\r\n                .then(res => {\r\n                    const filmTitle = this.props.filmTitle ? this.props.filmTitle : '';\r\n                    message = `Added film ${filmTitle} to playlist!`;\r\n                    if(this.state.playlistID && this.state.playlistID === playlisID)\r\n                        this.props.dispatch(userActions.playlistFilm('ADDED'));\r\n                    this.props.handlePlaylistOperation(message);\r\n\r\n\r\n                }).catch(err => {\r\n                console.log(err);\r\n            })\r\n        }\r\n\r\n\r\n    };\r\n\r\n    handleClick = () => {\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n        const title = this.state.title;\r\n\r\n        const body = {title: title, films: [this.props.filmID]};\r\n\r\n\r\n        axios.post(`${config.apiUrl}playlists`, body, requestParams)\r\n            .then(res => {\r\n                const filmTitle = this.props.filmTitle ? this.props.filmTitle : '';\r\n\r\n                let message = `Created playlist ${title} and added film ${filmTitle}!`;\r\n                this.props.handlePlaylistOperation(message);\r\n\r\n\r\n            }).catch(err => {\r\n            this.setState({error: true, errorMessage: err.response.data.errors[0]});\r\n            console.log(err.response.data.errors[0]);\r\n            console.log(err);\r\n            console.log(JSON.stringify(err));\r\n        })\r\n    };\r\n\r\n    componentDidMount() {\r\n\r\n        if(this.props.playlistID)\r\n            this.setState({playlistID: this.props.playlistID});\r\n\r\n        this.setState({show: true});\r\n        this.loadPlaylist()\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.show !== this.props.show) {\r\n            this.setState({show: this.props.show});\r\n        }\r\n    }\r\n\r\n    handleClickOutside() {\r\n        this.setState({show: false});\r\n        this.props.handleClickOutside(this.props.index);\r\n    };\r\n\r\n    loadPlaylist = () => {\r\n\r\n        const requestOptions = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}users/me/playlists`, requestOptions)\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n                    playlists.forEach(playlist => {\r\n                        if (playlist.films.indexOf(this.props.filmID) > -1) {\r\n                            playlist.contains = true;\r\n                        } else {\r\n                            playlist.contains = false;\r\n                        }\r\n                    });\r\n\r\n                    this.setState({\r\n                        isLoading: false,\r\n                        loaded: true,\r\n                        playlists: playlists\r\n                    })\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false,\r\n                        loaded: true,\r\n                    })\r\n                });\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const {index} = this.props;\r\n        const {parentName} = this.props;\r\n        const width = window.innerWidth;\r\n        const height = window.innerHeight;\r\n\r\n        let drop = 'down';\r\n\r\n        let contentHeight = 240;\r\n\r\n        if(this.menuRef && this.menuRef.current){\r\n\r\n            console.log(this.menuRef.current.getBoundingClientRect())\r\n\r\n            let tmpHeightBottom = height - (this.menuRef.current.getBoundingClientRect().top  +\r\n                this.menuRef.current.getBoundingClientRect().height) ;\r\n\r\n            let tmpHeightTop = (this.menuRef.current.getBoundingClientRect().top );\r\n\r\n            console.log(tmpHeightBottom);\r\n            console.log(tmpHeightTop);\r\n\r\n            if(tmpHeightBottom < contentHeight){\r\n                if(tmpHeightBottom > tmpHeightTop)\r\n                    contentHeight = tmpHeightBottom;\r\n                else{\r\n                    drop = 'up';\r\n                    if(tmpHeightTop < contentHeight)\r\n                        contentHeight = tmpHeightTop\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        let alignRight = false;\r\n\r\n        if(parentName === \"search\"){\r\n            alignRight = true;\r\n        }else if(parentName === \"home\"){\r\n            if (width >= 992) {\r\n                if (index % 6 === 5 || index % 6 === 4) {\r\n                    alignRight = true;\r\n                }\r\n            } else if (width >= 768) {\r\n                if (index % 4 === 3 || index % 4 === 2) {\r\n                    alignRight = true;\r\n\r\n                }\r\n            } else if (width >= 576) {\r\n                if (index % 3 === 2 || index % 3 === 1) {\r\n                    alignRight = true;\r\n                }\r\n            } else {\r\n                if (index % 2 === 1) {\r\n                    alignRight = true;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        return (\r\n\r\n            <Dropdown ref={this.menuRef} drop={drop}>\r\n                {\r\n                    this.state.loaded &&\r\n                    <Dropdown.Menu\r\n                            alignRight={alignRight}\r\n                            style={{ height: contentHeight + \"px\", width: 240 + \"px\", overflowY: \"scroll\"}}\r\n                            show={this.state.show}>\r\n                        {this.state.playlists.length > 0 &&\r\n                        <p className=\"dropdown-item-my pl-4 pr-4\">Save to...</p>}\r\n                        {this.state.playlists.length > 0 && <Dropdown.Divider/>}\r\n\r\n                        {\r\n                            this.state.playlists.map((playlist, index) => {\r\n                                console.log(playlist);\r\n                                return (<Col xs={12} sm={12} key={playlist.id}>\r\n                                    <Row className=\"pl-4 pr-4\">\r\n                                        <Col xs={12} sm={12} className=\"p-0 mb-2\">\r\n                                            <Form.Check\r\n                                                onChange={(e) => this.handleChange(e, index, playlist.id)}\r\n                                                custom\r\n                                                inline\r\n                                                checked={playlist.contains}\r\n                                                label={playlist.title}\r\n                                                type=\"checkbox\"\r\n                                                id={playlist.id}\r\n\r\n                                            />\r\n                                        </Col>\r\n\r\n                                    </Row>\r\n                                </Col>)\r\n                            })\r\n                        }\r\n\r\n                        {this.state.playlists.length > 0 && <Dropdown.Divider/>}\r\n                        <p className=\"dropdown-item-my pl-4 pr-4\">Create a new playlist</p>\r\n                        <FormControl\r\n                            isInvalid={this.state.error}\r\n                            onChange={(e) => {\r\n                                this.setState({error: false, title: e.target.value})\r\n                            }}\r\n                            className=\"dropdown-item-my w-75 ml-auto mr-auto mb-2 mt-2\"\r\n                            placeholder=\"Enter playlist name...\"\r\n\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\"\r\n                                               className=\"dropdown-item-my w-75 ml-auto mr-auto mb-2 mt-2\">\r\n                            Title is required\r\n                        </Form.Control.Feedback>\r\n                        <Col className=\"mb-1 text-right justify-content-end\">\r\n                            <Button onClick={this.handleClick}>Create</Button>\r\n                        </Col>\r\n\r\n\r\n                    </Dropdown.Menu>}\r\n\r\n            </Dropdown>\r\n\r\n\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {alert} = state;\r\n    return {\r\n        alert\r\n    }\r\n}\r\n\r\nconst connectedPlaylistAddComponent = connect(mapStateToProps)(enhanceWithClickOutside(PlaylistAddComponent));\r\nexport {connectedPlaylistAddComponent as PlaylistAddComponent};\r\n","import React, {Component} from 'react';\r\nimport {Col} from \"react-bootstrap\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {PlaylistAddComponent} from './PlaylistAddComponent'\r\nimport connect from \"react-redux/es/connect/connect\";\r\n\r\n\r\nclass PlaylistAddButtonComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({show: true});\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.show !== this.props.show) {\r\n            this.setState({show: this.props.show});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {index} = this.props;\r\n        const {show} = this.props;\r\n        const {loggedIn} = this.props;\r\n\r\n        const {parentName} = this.props;\r\n\r\n        const size = parentName !== \"home\" ? (parentName !== \"profile\" ? 2 : 12) : 8;\r\n\r\n        return (\r\n\r\n            loggedIn ?\r\n            <Col id=\"a-b-1\" xs={size} sm={size}\r\n                 className=\"p-0 text-center justify-content-center d-flex playlist-add-home\">\r\n                <Col id=\"a-b-2\" xs={8} sm={8}\r\n                     className=\"playlist-add-icon-holder p-0 text-center\"\r\n                     onClick={() => {\r\n                         this.props.handleAddPlaylistButtonClick(index)\r\n                     }}>\r\n\r\n                    <FontAwesomeIcon id=\"a-b-3\" style={{opacity: (show ? 1 : \"\")}}\r\n                                     className=\"playlist-add-icon\" icon=\"ellipsis-v\"/>\r\n                </Col>\r\n\r\n                {\r\n                    show && <PlaylistAddComponent parentName={this.props.parentName}\r\n                                                  filmID={this.props.filmID}\r\n                                                  filmTitle={this.props.filmTitle}\r\n                                                  show={show} index={index}\r\n                                                  playlistID = {this.props.playlistID}\r\n\r\n                                                  handleClick={this.props.handleClick}\r\n                                                  handleClickOutside={this.props.handleClickOutside}\r\n                                                  handlePlaylistOperation={this.props.handlePlaylistOperation}/>\r\n\r\n                }\r\n            </Col>\r\n                :\r\n                null\r\n\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n\r\n    return {\r\n        loggedIn,\r\n    };\r\n}\r\n\r\n\r\nconst connectedPlaylistAddButtonComponent = connect(mapStateToProps)(PlaylistAddButtonComponent);\r\n\r\nexport { connectedPlaylistAddButtonComponent as PlaylistAddButtonComponent };\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport Button from '@material-ui/core/Button';\r\nimport {userActions} from \"../../actions\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport {isMobile} from 'react-device-detect'\r\nconst pathName = config.pathName;\r\n\r\nclass HomeComponent extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            films: [],\r\n            addOpenedIndex: -1,\r\n\r\n            redirect: false,\r\n\r\n            clickedOutside: false,\r\n\r\n            error: false,\r\n            hasMore: false,\r\n            isLoading: false,\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n            open: false,\r\n            note: ''\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        if (localStorage.getItem('user')) {\r\n\r\n            axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                .then(res => {\r\n                }).catch(err => {\r\n                console.log(err);\r\n                console.log(JSON.stringify(err));\r\n                this.props.dispatch(userActions.logout());\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        this.setState({isLoading: true}, () => {\r\n            let limit = 3;\r\n            const {windowWidth} = this.state;\r\n\r\n            if (windowWidth <= 576)\r\n                limit = 1.3;\r\n            else if (windowWidth > 1920)\r\n                limit = 6;\r\n            else if (windowWidth > 1422)\r\n                limit = 5;\r\n\r\n            axios.get(`${config.apiUrl}films`, {params: {start: 0, limit: Math.ceil(6 * limit)}})\r\n                .then(response => {\r\n\r\n                    let films = response.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n                    this.setState({\r\n                        hasMore: films.length >= Math.ceil(6 * limit),\r\n                        films: films,\r\n                        isLoading: false\r\n                    });\r\n                });\r\n        });\r\n\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    handleScroll = () => {\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n        const {\r\n            loadData,\r\n            state: {\r\n                error,\r\n                isLoading,\r\n                hasMore\r\n            }\r\n        } = this;\r\n\r\n        if (error || isLoading || !hasMore) return;\r\n\r\n        if ((window.innerHeight + document.documentElement.scrollTop) >= (document.body.offsetHeight - 150)) {\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({open: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({open: false});\r\n    };\r\n\r\n\r\n    loadData = () => {\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}films`, {params: {start: this.state.films.length, limit: 6}})\r\n                .then(response => {\r\n\r\n                    let films = response.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n\r\n                    this.setState({\r\n                        hasMore: (films.length === 6),\r\n                        isLoading: false,\r\n                        films: [\r\n                            ...this.state.films,\r\n                            ...films]\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    })\r\n                });\r\n        })\r\n    };\r\n\r\n    setRedirect = (filmID) => {\r\n        this.props.history.push(`${pathName}film/` + filmID);\r\n    };\r\n\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n        const {scroll} = this.state;\r\n\r\n        return (\r\n            <Col>\r\n\r\n\r\n                <Row className=\"mt-5\">\r\n\r\n                    {\r\n                        this.state.films.map((film, index) => {\r\n\r\n                                const filmID = film.id;\r\n\r\n\r\n                                return <Col className=\"mb-5 film-preview-holder\" xs={6} sm={4} md={3} lg={2} key={film.id}>\r\n                                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half container\">\r\n                                        {\r\n                                            <img\r\n                                                alt=\"\"\r\n                                                className=\"embed-responsive-item image\"\r\n                                                src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=250`}\r\n                                                onClick={() => this.setRedirect(filmID)}/>\r\n                                        }\r\n                                        <FontAwesomeIcon className=\"middle\" icon=\"play\"\r\n                                                         onClick={() => this.setRedirect(filmID)}/>\r\n\r\n                                    </div>\r\n\r\n                                    <Row className=\"m-0\">\r\n                                        <Col xs={10} sm={10} className=\"p-0\">\r\n\r\n                                            <TextTruncate line={2} text={film.title}\r\n                                                          id=\"s-c-2\"\r\n                                                          className=\"mb-1 mt-1 title \"/>\r\n\r\n                                        </Col>\r\n                                        <Col xs={2} sm={2} className=\"p-0\"  style={{position: 'absolute', right: 0}}>\r\n                                        <PlaylistAddButtonComponent\r\n                                                                    parentName=\"home\"\r\n                                                                    filmID={film.id}\r\n                                                                    show={film.add} index={index}\r\n                                                                    handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                                                    handleClick={this.handleCreatePlaylistClick}\r\n                                                                    handleClickOutside={this.handleClickOutside}\r\n                                                                    handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <p className=\"mb-0 author-nick\">\r\n                                        <small>{film.author_name}</small>\r\n                                    </p>\r\n                                    <p className=\"mb-0 film-views\">\r\n                                        <small>{film.views} views</small>\r\n                                    </p>\r\n\r\n                                </Col>\r\n\r\n\r\n                            }\r\n                        )\r\n\r\n\r\n                    }\r\n\r\n                </Row>\r\n                {\r\n                    ((scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) && this.state.hasMore) &&\r\n                    <Col sm={12} className=\"text-center\">\r\n                        <Button\r\n                            className=\"button-my\"\r\n                            variant=\"contained\"\r\n                            disabled={isLoading}\r\n                            onClick={!isLoading ? this.loadData : null}\r\n                        >\r\n                            {isLoading ? 'Loading' : 'Click to load'}\r\n                        </Button>\r\n                    </Col>\r\n\r\n\r\n                }\r\n                {\r\n\r\n\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.open}\r\n                    autoHideDuration={3000}\r\n                    onClose={this.handleClose}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedHomePage = connect(mapStateToProps)(HomeComponent);\r\n\r\n\r\nexport {connectedHomePage as HomeComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Col, Row, Spinner} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\n\r\nimport './FilmComponent.css';\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport Snackbar from \"@material-ui/core/Snackbar/Snackbar\";\r\nimport TextTruncate from 'react-text-truncate';\r\n\r\nimport {isMobile} from 'react-device-detect'\r\n\r\nconst CancelToken = axios.CancelToken;\r\nlet source = CancelToken.source();\r\n\r\nclass FilmsPreviewComponent extends Component {\r\n\r\n    loadFilms = () => {\r\n\r\n        const t = Date.now();\r\n\r\n\r\n        this.setState({isLoading: true}, () => {\r\n\r\n            this.props.handleLoading(this.state);\r\n\r\n            axios.get(`${config.apiUrl}films`, {\r\n                params: {\r\n                    exclude: this.state.filmID,\r\n                    start: this.state.films.length,\r\n                    limit: 8,\r\n                    t: t\r\n                }\r\n            })\r\n                .then(res => {\r\n                    console.log(\"AXIOS MAD\");\r\n\r\n                    let films = res.data;\r\n\r\n\r\n                    const maxSize = films.length === 0 && this.state.films.length < 20 ? this.state.films.length : 20;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n                    this.setState({\r\n                        hasMore: (this.state.films.length + films.length < maxSize),\r\n                        isLoading: false,\r\n                        films: [\r\n                            ...this.state.films,\r\n                            ...films], isLoaded: true\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    });\r\n                })\r\n                .catch((err) => {\r\n                    console.log(\"AXIOS MADxx\");\r\n                    console.log(JSON.stringify(err));\r\n\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false, isLoaded: true\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    })\r\n                })\r\n        })\r\n\r\n    };\r\n\r\n\r\n    setRedirect = (e, filmID) => {\r\n        if (e && e.target && (e.target.id === \"s-c-1\"\r\n            || e.target.id === \"s-c-2\" || e.target.id === \"s-c-3\" || e.target.id === \"s-c-4\"\r\n            || (e.target.localName === \"path\" && e.target.parentElement && e.target.parentElement.parentElement\r\n                && e.target.parentElement.parentElement.id !== \"a-b-2\")))\r\n            this.props.handleThumbnail(filmID);\r\n    };\r\n\r\n    handleScroll = () => {\r\n\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n    };\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({openSnackbar: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleCloseSnackbar = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n            filmID: '',\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: false,\r\n\r\n            isLoaded: false,\r\n\r\n            films: [],\r\n            addOpenedIndex: -1,\r\n            openSnackbar: false,\r\n            note: ''\r\n\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({filmID: this.props.filmID});\r\n        this.loadFilms();\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.isLoading !== this.props.isLoading) {\r\n            if (this.props.isLoading && !(this.state.error || this.state.isLoading || !this.state.hasMore)) {\r\n                this.loadFilms();\r\n            }\r\n        }\r\n        if (prevProps.filmID !== this.props.filmID) {\r\n\r\n            source.cancel();\r\n            source = axios.CancelToken.source();\r\n\r\n            console.log(\"ON UPDATE FROM PREVIEW\");\r\n            this.setState({\r\n                isLoading: true,\r\n                isLoaded: false,\r\n                filmID: this.props.filmID,\r\n                error: false,\r\n                hasMore: true,\r\n                films: [],\r\n                addOpenedIndex: -1,\r\n                openSnackbar: false\r\n            }, () => {\r\n\r\n                this.props.handleLoading(this.state);\r\n\r\n                axios.get(`${config.apiUrl}films`, {\r\n                    cancelToken: source.token,\r\n                    params: {\r\n                        exclude: this.state.filmID,\r\n                        start: 0,\r\n                        limit: 8\r\n                    }\r\n                })\r\n                    .then(res => {\r\n\r\n                        let films = res.data;\r\n\r\n                        films.forEach(film => {\r\n                            film.add = false;\r\n                        });\r\n\r\n                        this.setState({\r\n                            isLoaded: true,\r\n                            hasMore: films.length < 20,\r\n                            isLoading: false,\r\n                            films: films\r\n                        }, () => {\r\n                            console.log(\"ON UPDATE FROM PREVIEW ENDEEEEEEEEEEED\");\r\n                            this.props.handleLoading(this.state);\r\n                        });\r\n                    })\r\n                    .catch((err) => {\r\n                        if (axios.isCancel(err)) {\r\n                            console.log('Request canceled', err.message);\r\n                        } else {\r\n                            this.setState({\r\n                                error: err.message,\r\n                                isLoading: false\r\n                            }, () => {\r\n                                this.props.handleLoading(this.state);\r\n                            })\r\n                        }\r\n                    })\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n\r\n        return (\r\n\r\n            <Col className=\"p-0\">\r\n\r\n                {\r\n                    this.state.films.map((film, index) => {\r\n\r\n\r\n                        return (\r\n                            <Col className=\"film-preview-holder p-0 mb-4 container\" onClick={(e) => this.setRedirect(e, film.id)}\r\n                                 key={film.id}>\r\n                                <Row>\r\n                                    <Col xs={7} sm={7}>\r\n                                        <div\r\n                                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                            <img alt=\"\" id=\"s-c-1\" className=\"image embed-responsive-item\"\r\n                                                 src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=250`}/>\r\n                                            <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                        </div>\r\n                                    </Col>\r\n                                    <Col xs={5} sm={5} className=\"p-0 \">\r\n                                        <Row className=\"m-0\">\r\n                                            <Col xs={10} sm={10} className=\"p-0\">\r\n                                                <TextTruncate line={2} text={film.title}\r\n                                                              id=\"s-c-2\" className=\"mb-1 title font-weight-bold\"/>\r\n\r\n                                            </Col>\r\n                                            <PlaylistAddButtonComponent parentName=\"search\"\r\n                                                                        filmID={film.id}\r\n                                                                        show={film.add} index={index}\r\n                                                                        playlistID={this.props.playlistID}\r\n\r\n                                                                        handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                                                        handleClick={this.handleCreatePlaylistClick}\r\n                                                                        handleClickOutside={this.handleClickOutside}\r\n                                                                        handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n\r\n                                        </Row>\r\n                                        <p id=\"s-c-3\" className=\"mb-0 author-nick\">\r\n                                            <small>{film.author_name}</small>\r\n                                        </p>\r\n                                        <p id=\"s-c-4\" className=\"film-views\">\r\n                                            <small>{film.views} views</small>\r\n                                        </p>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        )\r\n                    })\r\n                }\r\n\r\n                <Col style={{height: 40}} sm={12} className=\"mb-2 text-center\">\r\n                    {\r\n                        (this.state.isLoading && this.state.hasMore && this.state.isLoaded) &&\r\n                        <Spinner animation=\"border\"/>\r\n                    }\r\n                </Col>\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={1500}\r\n                    onClose={this.handleCloseSnackbar}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n\r\n            </Col>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    const {rated} = state.rate;\r\n\r\n    return {\r\n        loggedIn,\r\n        rated,\r\n    };\r\n}\r\n\r\n\r\nconst connectedFilmPage = connect(mapStateToProps)(FilmsPreviewComponent);\r\n\r\nexport {connectedFilmPage as FilmsPreviewComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\n\r\nimport './PlaylistComponent.css';\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\n\r\nimport 'react-perfect-scrollbar/dist/css/styles.css';\r\n\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\nimport {userActions} from \"../../actions\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport Snackbar from \"@material-ui/core/Snackbar/Snackbar\";\r\nimport TextTruncate from \"react-text-truncate\";\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass PlaylistComponent extends Component {\r\n\r\n\r\n    setRedirect = (filmID) => {\r\n        this.props.history.push(\r\n            {\r\n                pathname: `${pathName}film/` + filmID,\r\n                search: `?list=${this.state.playlist.id}`\r\n            });\r\n        this.props.handleSubmit(filmID);\r\n\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({\r\n            playlistHeight: this.props.filmElement.clientHeight,\r\n\r\n            playlistHeaderHeight: (this.playlistHeader !== null &&\r\n                this.playlistHeader.current !== null && this.playlistHeader.current.clientHeight != null) ?\r\n                this.playlistHeader.current.clientHeight : this.state.playlistHeaderHeight\r\n        });\r\n    };\r\n\r\n    loadFilm = () => {\r\n\r\n        axios.get(`${config.apiUrl}playlists/${this.props.id}`)\r\n            .then(res => {\r\n                this.setState({playlist: res.data});\r\n                const playlistFilms = res.data.films;\r\n                const requests = [];\r\n\r\n                playlistFilms.forEach((film, index) => {\r\n\r\n                    if (film === this.state.currentFilm)\r\n                        this.setState({index: index + 1});\r\n\r\n                    requests.push(axios.get(`${config.apiUrl}films/${film}/desc/no`)\r\n                        .then(res => {\r\n                            let film = res.data;\r\n                            return film;\r\n                        })\r\n                        .catch((err) => {\r\n                            console.log(JSON.stringify(err));\r\n                            this.setState({\r\n                                error: err.message,\r\n                            })\r\n                        }));\r\n\r\n\r\n                });\r\n\r\n                Promise.all(requests).then((films) => {\r\n                    this.setState({\r\n                        films: films,\r\n                        playlistHeight: this.props.filmElement.clientHeight,\r\n                        isPlaylistLoaded: true\r\n                    }, () => {\r\n                        this.setState({\r\n                            playlistHeaderHeight: (this.playlistHeader !== null &&\r\n                                this.playlistHeader.current !== null && this.playlistHeader.current.clientHeight != null) ?\r\n                                this.playlistHeader.current.clientHeight : this.state.playlistHeaderHeight\r\n                        });\r\n                    });\r\n                });\r\n\r\n            }).catch((error) => {\r\n            console.log(error)\r\n        });\r\n    };\r\n\r\n    checkOwnerOfPlaylist = (playlistID) => {\r\n        if (localStorage.getItem('user')) {\r\n            const requestOptions = {\r\n                headers: authHeader()\r\n            };\r\n\r\n            this.setState({isLoading: true}, () => {\r\n                axios.get(`${config.apiUrl}users/me`, requestOptions)\r\n                    .then(response => {\r\n\r\n                        let playlists = response.data.playlists;\r\n                        if (playlists.indexOf(playlistID) > -1)\r\n                            this.setState({ownerOfPlaylist: true});\r\n\r\n                        this.setState({\r\n                            isLoading: false,\r\n                            loaded: true,\r\n                            playlists: playlists\r\n                        })\r\n\r\n                    })\r\n                    .catch((err) => {\r\n                        this.setState({\r\n                            error: err.message,\r\n                            isLoading: false,\r\n                            loaded: true,\r\n                        })\r\n                    });\r\n            })\r\n        }\r\n    };\r\n\r\n    handleRemoveFromPlaylist = (filmID) => {\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        const body = {films: [filmID]};\r\n\r\n        axios.put(`${config.apiUrl}playlists/${this.state.id}/films/delete/`, body, requestParams)\r\n            .then(res => {\r\n\r\n                this.setState({openSnackbar: true, note: \"Deleted from playlist!\"});\r\n\r\n                this.props.dispatch(userActions.playlistFilm('DELETED'));\r\n\r\n            }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    handleRemovePlaylist = () => {\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.delete(`${config.apiUrl}playlists/${this.state.id}`, requestParams)\r\n            .then(res => {\r\n                console.log(res);\r\n                this.setState({openSnackbar: true, note: \"Playlist deleted!\"});\r\n                this.props.handleDeletePlaylist();\r\n            }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    handleCloseSnackbar = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.playlistHeader = React.createRef();\r\n\r\n        this.state = {\r\n\r\n            currentFilm: null,\r\n            id: null,\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: false,\r\n\r\n            films: [],\r\n            playlist: '',\r\n            playlistHeight: 300,\r\n            playlistHeaderHeight: 50,\r\n\r\n            index: 1,\r\n\r\n            isPlaylistLoaded: false,\r\n            ownerOfPlaylist: false,\r\n            openSnackbar: false,\r\n            note: ''\r\n\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.props.id) {\r\n            console.log(\"Error loading playlist...\");\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({id: this.props.id, currentFilm: this.props.filmID}, () => {\r\n            this.checkOwnerOfPlaylist(this.state.id)\r\n        });\r\n\r\n        this.loadFilm();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.handleResize);\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.filmID !== this.props.filmID) {\r\n            this.setState({\r\n                currentFilm: this.props.filmID,\r\n                index: this.state.films.findIndex((film => film !== null && film !== undefined && film.id === this.props.filmID)) + 1\r\n            });\r\n        }\r\n\r\n\r\n        if (this.props.playlistFilm !== '' && prevProps.playlistFilm !== this.props.playlistFilm) {\r\n            if (this.props.playlistFilm === 'ADDED' || this.props.playlistFilm === 'DELETED') {\r\n                this.loadFilm();\r\n            }\r\n\r\n            this.props.dispatch(userActions.playlistFilm(''));\r\n\r\n        }\r\n\r\n        if (this.props.loggedIn !== prevProps.loggedIn) {\r\n            if (this.props.loggedIn) {\r\n                this.checkOwnerOfPlaylist(this.state.id)\r\n\r\n            } else {\r\n                this.setState({ownerOfPlaylist: false});\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        const {windowWidth} = this.props;\r\n\r\n        const lines = windowWidth > 768 && windowWidth < 1024 ? 1 : 2;\r\n\r\n        return (\r\n\r\n            (this.state.isPlaylistLoaded) &&\r\n            <Col className=\"p-0  mt-4 mb-5\">\r\n                <Col className=\"pt-2 pb-2 playlist-header\" sm={12} ref={this.playlistHeader}>\r\n                    <Row className=\"m-0 p-0\">\r\n                        <Col className=\"m-0 p-0\" id=\"playlist_remove_header\" xs={10} sm={10}>\r\n                            <p className=\"mb-1\">{this.state.playlist.title}</p>\r\n                            <small>Marcin</small>\r\n                            <small\r\n                                className=\"playlist-index\">- {this.state.films.length > 0 ? this.state.index : 0}/{this.state.films.length}</small>\r\n                        </Col>\r\n                        {\r\n                            this.state.ownerOfPlaylist &&\r\n                            <Col id=\"playlist_remove\" xs={2} sm={2} className={\r\n                                \"m-0 p-0 text-center justify-content-center d-flex align-items-center\"}\r\n                                 onClick={() => this.handleRemovePlaylist()}>\r\n                                <FontAwesomeIcon id=\"playlist_remove_film_icon\" icon=\"trash-alt\"/>\r\n                            </Col>\r\n                        }\r\n                    </Row>\r\n                </Col>\r\n                <Col style={{height: this.state.playlistHeight - this.state.playlistHeaderHeight + 'px'}}\r\n                     className=\"p-0 playlist-container\" xs={12} sm={12}>\r\n                    <PerfectScrollbar\r\n                        onYReachEnd={() => {\r\n                            console.log(\"REACH\")\r\n                        }} onScrollY={() => {\r\n                        console.log(\"DOWN\")\r\n                    }}>\r\n                        {\r\n                            this.state.films.map((film, index) => {\r\n                                    if (film !== null && film !== undefined) {\r\n                                       return (\r\n                                            <Row xs={12} sm={12} className=\"m-0 p-0 playlist-remove-container\" key={film.id}>\r\n                                                <Col xs={10} sm={10}\r\n                                                     className={index === this.state.films.length - 1 ?\r\n                                                         \"mt-3 mb-3\" :\r\n                                                         \"mt-3\"}\r\n                                                     onClick={() => this.setRedirect(film.id)}\r\n                                                >\r\n                                                    <Row>\r\n                                                        <Col\r\n                                                            className=\"text-center justify-content-center d-flex align-items-center p-0 pl-1\"\r\n                                                            xs={1} sm={1}>\r\n                                                            {\r\n                                                                (this.state.currentFilm === film.id && this.state.index === index + 1) ?\r\n                                                                    <small><FontAwesomeIcon style={{fontWeight: 300}}\r\n                                                                                            icon=\"play\"/></small>\r\n                                                                    :\r\n                                                                    <small>{index + 1}</small>\r\n\r\n                                                            }\r\n                                                        </Col>\r\n                                                        <Col className=\"pr-2 pl-2\" xs={6} sm={6}>\r\n                                                            <div\r\n                                                                className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                                <img alt=\"\" className=\"image embed-responsive-item\"\r\n                                                                     src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=250`}/>\r\n                                                                <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                            </div>\r\n                                                        </Col>\r\n                                                        <Col xs={5} sm={5} className=\"p-0\">\r\n                                                            <TextTruncate line={lines} text={film.title}\r\n                                                                          className=\"mb-0 title font-weight-bold\"/>\r\n                                                            <p className=\"mb-1 author-nick\">\r\n                                                                <small>{film.author_name}</small>\r\n                                                            </p>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </Col>\r\n                                                {\r\n                                                    this.state.ownerOfPlaylist &&\r\n                                                    <Col xs={2} sm={2}\r\n                                                         className={index === this.state.films.length - 1 ?\r\n                                                             \"playlist-remove-holder mt-3 mb-3 text-center justify-content-center d-flex align-items-center\" :\r\n                                                             \"playlist-remove-holder mt-3 text-center justify-content-center d-flex align-items-center\"}>\r\n                                                        <FontAwesomeIcon\r\n                                                            onClick={() => this.handleRemoveFromPlaylist(film.id)}\r\n                                                            icon=\"trash-alt\"/>\r\n                                                    </Col>\r\n                                                }\r\n\r\n                                            </Row>\r\n                                        )\r\n                                    }else{\r\n                                        return (\r\n                                            <Row xs={12} sm={12} className=\"m-0 p-0 playlist-remove-container\" key={index}>\r\n                                                <Col xs={10} sm={10}\r\n                                                     className={index === this.state.films.length - 1 ?\r\n                                                         \"mt-3 mb-3\" :\r\n                                                         \"mt-3\"}\r\n                                                >\r\n                                                    <Row>\r\n                                                        <Col\r\n                                                            className=\"text-center justify-content-center d-flex align-items-center p-0 pl-1\"\r\n                                                            xs={1} sm={1}>\r\n                                                            {\r\n                                                                (this.state.index === index + 1) ?\r\n                                                                    <small><FontAwesomeIcon style={{fontWeight: 300}}\r\n                                                                                            icon=\"play\"/></small>\r\n                                                                    :\r\n                                                                    <small>{index + 1}</small>\r\n\r\n                                                            }\r\n                                                        </Col>\r\n                                                        <Col className=\"pr-2 pl-2\" xs={6} sm={6}>\r\n                                                            <div\r\n                                                                className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                                <img alt=\"\" className=\" embed-responsive-item\"\r\n                                                                     src=\"https://www.atelierliving.nl/wp-content/themes/ctrln/assets/images/placeholder.png\"/>\r\n                                                                <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                            </div>\r\n                                                        </Col>\r\n                                                        <Col xs={5} sm={5} className=\"p-0\">\r\n                                                            <p className=\"mb-0 title font-weight-bold mb-1 author-nick\">[Film delted]</p>\r\n                                                        </Col>\r\n                                                    </Row>\r\n                                                </Col>\r\n                                                {\r\n                                                    this.state.ownerOfPlaylist &&\r\n                                                    <Col xs={2} sm={2}\r\n                                                         className={index === this.state.films.length - 1 ?\r\n                                                             \"playlist-remove-holder mt-3 mb-3 text-center justify-content-center d-flex align-items-center\" :\r\n                                                             \"playlist-remove-holder mt-3 text-center justify-content-center d-flex align-items-center\"}>\r\n                                                        <FontAwesomeIcon\r\n                                                            onClick={() => this.handleRemoveFromPlaylist(this.state.playlist.films[index])}\r\n                                                            icon=\"trash-alt\"/>\r\n                                                    </Col>\r\n                                                }\r\n\r\n                                            </Row>)\r\n                                    }\r\n                                }\r\n                            )}\r\n                    </PerfectScrollbar>\r\n\r\n                </Col>\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={3000}\r\n                    onClose={this.handleCloseSnackbar}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n\r\n            </Col>\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    const {rated} = state.rate;\r\n    const {playlistFilm} = state.playlistFilm;\r\n\r\n    return {\r\n        loggedIn,\r\n        rated,\r\n        playlistFilm\r\n    };\r\n}\r\n\r\nconst connectedPlaylistPage = connect(mapStateToProps)(PlaylistComponent);\r\n\r\nexport {connectedPlaylistPage as PlaylistComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Button, Col, Dropdown, DropdownButton, Row, Spinner} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {authHeader} from \"../../helpers\";\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\n\r\nconst CancelToken = axios.CancelToken;\r\nlet source = CancelToken.source();\r\nconst pathName = config.pathName;\r\n\r\nclass CommentsComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            filmID: '',\r\n\r\n            comments: [],\r\n\r\n            comment: '',\r\n            dir: 1,\r\n\r\n            error: false,\r\n            hasMore: true,\r\n            isLoading: false,\r\n\r\n            isLoaded: false,\r\n\r\n            addedCount: 0\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    loadComments = () => {\r\n        this.setState({isLoading: true}, () => {\r\n\r\n            this.props.handleLoading(this.state);\r\n\r\n            axios.get(`${config.apiUrl}films/${this.state.filmID}/desc`,\r\n                {params: {start: this.state.comments.length, limit: 10}})\r\n                .then(res => {\r\n\r\n                    let film = res.data;\r\n\r\n                    this.setState({\r\n                        hasMore: (film.comments.length > 0),\r\n                        isLoading: false,\r\n                        comments: [...this.state.comments, ...film.comments]\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    }, () => {\r\n                        this.props.handleLoading(this.state);\r\n                    })\r\n                })\r\n        })\r\n    };\r\n\r\n    addComment = () => {\r\n\r\n        if (!localStorage.getItem('user')) {\r\n            this.props.history.push(`${pathName}film/${this.state.filmID}/login`);\r\n            return;\r\n        }\r\n\r\n        const requestOptions = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.post(`${config.apiUrl}films/${this.state.filmID}/comments`,\r\n            {text: this.state.comment}, requestOptions)\r\n\r\n            .then((response) => {\r\n\r\n                if (response.status === 200) {\r\n                    const comment = response.data;\r\n\r\n                    axios.get(`${config.apiUrl}users/${comment.author_id}`)\r\n                        .then(res => {\r\n                            let array = this.state.comments;\r\n                            array.unshift({\r\n                                id: comment._id,\r\n                                author: res.data.nick,\r\n                                comment: comment.text,\r\n                                createdAt: comment.createdAt\r\n                            });\r\n\r\n                            this.setState({comment: '', comments: array,\r\n                                addedCount: this.state.addedCount + 1\r\n                            })\r\n\r\n                        })\r\n\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    sortComments = (e) => {\r\n        let path = '';\r\n\r\n        switch (e) {\r\n            case 'commentByDate':\r\n                path = 'date';\r\n\r\n                break;\r\n            case 'commentByName':\r\n                path = 'author';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (path === '')\r\n            return;\r\n\r\n\r\n        axios.get(`${config.apiUrl}films/${this.state.filmID}/comments/sort/${path}/${this.state.dir}`,\r\n            {params: {start: 0, limit: this.state.comments.length}})\r\n            .then(res => {\r\n\r\n                const data = res.data[0].comments;\r\n\r\n                const requests = [];\r\n\r\n                data.forEach(comment => {\r\n                    requests.push({\r\n                        id: comment.comment._id,\r\n                        author: comment.author,\r\n                        comment: comment.comment.text,\r\n                        createdAt: comment.comment.createdAt\r\n                    })\r\n                });\r\n\r\n                Promise.all(requests).then((comments) => {\r\n                    this.setState({comments: comments});\r\n                });\r\n            });\r\n\r\n        this.setState({dir: this.state.dir * -1});\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setState({isLoading: true, filmID: this.props.filmID}, () => {\r\n\r\n            axios.get(`${config.apiUrl}films/${this.state.filmID}/desc`,\r\n                {params: {start: this.state.comments.length, limit: 5}})\r\n                .then(res => {\r\n\r\n                    let film = res.data;\r\n                    console.log(\"LENGTH\", film.comments.length)\r\n                    this.setState({\r\n                        hasMore: (film.comments.length > 0),\r\n                        isLoading: false,\r\n                        isLoaded: true,\r\n                        comments: [...this.state.comments, ...film.comments]\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    })\r\n                })\r\n        })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.isLoading !== this.props.isLoading) {\r\n            if (this.props.isLoading && !(this.state.error || this.state.isLoading || !this.state.hasMore)) {\r\n                this.loadComments();\r\n            } else {\r\n                this.props.handleLoading(this.state)\r\n            }\r\n        }\r\n\r\n        if (prevProps.filmID!== this.props.filmID ) {\r\n\r\n            source.cancel();\r\n            source = axios.CancelToken.source();\r\n\r\n            this.setState({\r\n                filmID: this.props.filmID,\r\n                comment: '',\r\n                dir: 1,\r\n                comments: [],\r\n\r\n                isLoading: true,\r\n                isLoaded: false,\r\n                error: false,\r\n                hasMore: true,\r\n                addedCount: 0\r\n            }, () => {\r\n\r\n                this.props.handleLoading(this.state);\r\n\r\n                axios.get(`${config.apiUrl}films/${this.props.filmID}/desc`,\r\n                    {cancelToken: source.token, params: {start: 0, limit: 5}})\r\n                    .then(res => {\r\n                        console.log(\"UPDATING....\", this.props.filmID)\r\n                        let film = res.data;\r\n                        console.log(\"LENGTH\", film.comments.length)\r\n\r\n                        this.setState({\r\n                            hasMore: (film.comments.length > 0),\r\n                            isLoading: false,\r\n                            isLoaded: true,\r\n                            comments: film.comments\r\n                        }, () => {\r\n                            this.props.handleLoading(this.state);\r\n                        });\r\n\r\n                    })\r\n                    .catch((err) => {\r\n                        if (axios.isCancel(err)) {\r\n                            console.log('Request canceled', err.message);\r\n                        } else {\r\n                            this.setState({\r\n                                error: err.message,\r\n                                isLoading: false,\r\n                                isLoaded: true,\r\n                            }, () => {\r\n                                this.props.handleLoading(this.state);\r\n                            })\r\n                        }\r\n\r\n                    })\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    handleChange(e) {\r\n        this.setState({comment: e.target.value});\r\n    }\r\n\r\n    render() {\r\n\r\n        const displayDate = (comment) => {\r\n            let date = new Date(Date.parse(comment.createdAt));\r\n            return ('0' + date.getDay()).slice(-2) + '-' + ('0' + date.getMonth()).slice(-2) + '-'\r\n                + ('0' + date.getFullYear()).slice(-2)\r\n                + ' o ' + ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2);\r\n        };\r\n\r\n        let {commentsLength} = this.props;\r\n        commentsLength += this.state.addedCount;\r\n\r\n        return (\r\n\r\n            <Col className=\"p-0 mt-4\">\r\n                {\r\n                    this.state.isLoaded &&\r\n                    <Col>\r\n                        <Col className=\"p-0\" sm={12}>\r\n                            <Row>\r\n                                <Col xs={8} sm={10}>\r\n                                    <TextField\r\n                                        value={this.state.comment}\r\n                                        onChange={this.handleChange}\r\n                                        type=\"text\"\r\n                                        id=\"standard-multiline-flexible\"\r\n                                        label=\"Comment\"\r\n                                        multiline\r\n                                        fullWidth\r\n                                        rowsMax=\"4\"\r\n                                    />\r\n                                </Col>\r\n                                <Col xs={2} sm={2}>\r\n                                    <Button className=\"mt-3\" variant=\"primary\"\r\n                                            onClick={() => this.addComment()}>\r\n                                        Submit\r\n                                    </Button>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                        {\r\n                            <Col className=\"p-0 mt-4 mb-4\" sm={12}>\r\n                                <Row>\r\n                                    <Col xs={7} sm={5} md={4}>\r\n                                        <p className=\"m-0\">{commentsLength + \" comments\"}</p>\r\n                                    </Col>\r\n                                    <Col xs={2} sm={2}>\r\n                                        <DropdownButton\r\n                                            alignRight\r\n                                            variant=\"secondary\"\r\n                                            title=\"Sort\"\r\n                                            id=\"dropdown-button-drop-down\"\r\n                                            onSelect={k => this.sortComments(k)}>\r\n                                            <Dropdown.Item eventKey=\"commentByDate\">By date</Dropdown.Item>\r\n                                            <Dropdown.Item eventKey=\"commentByName\">By author name</Dropdown.Item>\r\n                                        </DropdownButton>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Col>\r\n                        }\r\n\r\n                        {\r\n\r\n                            this.state.comments.map(comment => {\r\n                                return (\r\n                                    <Col className=\"p-0 mt-4\" sm={12} key={comment.id}>\r\n                                        <Row className=\"pl-3\">\r\n\r\n                                            <p className=\"m-0 font-weight-bold\">\r\n                                                <small className=\"m-0 font-weight-bold\">{comment.author}</small>\r\n                                            </p>\r\n                                            <p>\r\n                                                <small className=\"m-0\">&ensp;{displayDate(comment)}</small>\r\n                                            </p>\r\n                                        </Row>\r\n                                        <p>\r\n                                            <small>{comment.comment}</small>\r\n                                        </p>\r\n                                    </Col>\r\n                                )\r\n                            })\r\n\r\n\r\n                        }\r\n\r\n                    </Col>\r\n\r\n                }\r\n\r\n                {\r\n\r\n                    <Col style={{height: 40}} sm={12} className=\"mb-2 text-center\">\r\n                        {\r\n                            (this.state.isLoading && this.state.hasMore) &&\r\n                            <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n            </Col>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    const {rated} = state.rate;\r\n\r\n    return {\r\n        loggedIn,\r\n        rated,\r\n    };\r\n}\r\n\r\n\r\nconst connectedFilmPage = connect(mapStateToProps)(CommentsComponent);\r\n\r\nexport {connectedFilmPage as CommentsComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {Button, Col, Row} from \"react-bootstrap\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\n\r\nimport './FilmComponent.css';\r\n\r\nimport {authHeader} from \"../../helpers\";\r\nimport {config} from \"../../config\";\r\nimport {connect} from \"react-redux\";\r\nimport {userActions} from \"../../actions\"\r\n\r\nimport \"../../../node_modules/video-react/dist/video-react.css\";\r\nimport {FilmsPreviewComponent} from \"./FilmsPreviewComponent\";\r\nimport {PlaylistComponent} from \"../Playlist/PlaylistComponent\";\r\nimport {CommentsComponent} from \"../Comments/CommentsComponent\";\r\nimport queryString from \"query-string\";\r\nimport {Player} from 'video-react';\r\nimport TextTruncate from 'react-text-truncate';\r\n\r\nconst CancelToken = axios.CancelToken;\r\nlet source = CancelToken.source();\r\n\r\nconst windowBreakpoint = 768;\r\nconst pathName = config.pathName;\r\n\r\nclass FilmComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            film: {},\r\n\r\n            isMounted: false,\r\n\r\n            isLoading: false,\r\n\r\n            isLoadingFilms: false,\r\n            isLoadingComments: false,\r\n\r\n            hasMoreFilms: true,\r\n\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n            displayPlaylist: false,\r\n            playlistHeight: 400,\r\n            playlistID: null,\r\n            error: false,\r\n\r\n            expanded: false,\r\n            truncated: false\r\n        };\r\n\r\n        this.handleTruncate = this.handleTruncate.bind(this);\r\n        this.toggleLines = this.toggleLines.bind(this);\r\n    }\r\n\r\n    handleTruncate(event) {\r\n\r\n        event.preventDefault();\r\n        this.setState({\r\n            truncated: false,\r\n            expanded: true\r\n        });\r\n    }\r\n\r\n    toggleLines(event) {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            expanded: !this.state.expanded\r\n        });\r\n    }\r\n\r\n    handleScroll = () => {\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        if ((window.innerHeight + document.documentElement.scrollTop) >= (document.body.offsetHeight - 150)) {\r\n            this.setState({isLoadingFilms: true});\r\n            if(window.innerWidth <= windowBreakpoint){\r\n                if(!this.state.hasMoreFilms){\r\n                    this.setState({isLoadingComments: true});\r\n                }\r\n            }else{\r\n                this.setState({isLoadingComments: true});\r\n            }\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n\r\n        this.setState({windowWidth: window.innerWidth});\r\n\r\n        let params = queryString.parse(this.props.location.search);\r\n\r\n        if (params && params.list) {\r\n            this.setState({\r\n                playlistHeight: this.filmElement.clientHeight\r\n            });\r\n        }\r\n    };\r\n\r\n    updateMeta = (meta) => {\r\n\r\n        if (meta !== 'views' && !localStorage.getItem('user')) {\r\n            this.props.history.push(`${pathName}film/${this.state.film.filmID}/login`);\r\n            return;\r\n        }\r\n\r\n        const options = {headers: {'Content-Type': 'application/json'}};\r\n\r\n        if (meta === 'views') {\r\n            return axios.put(`${config.apiUrl}films/${this.state.film.filmID}/meta`, JSON.stringify({'views': 1}),\r\n                options)\r\n                .then(data => {\r\n                    this.setState({\r\n                        isLoading: false\r\n                    });\r\n                }).catch(err => {\r\n                    this.setState({\r\n                        isLoading: false\r\n                    });\r\n                    console.log(err);\r\n                    console.log(JSON.stringify(err));\r\n                });\r\n        }\r\n\r\n        const requestOptions = {headers: authHeader()};\r\n\r\n        return axios.put(`${config.apiUrl}users/update/meta`, {[meta]: this.state.film.filmID},\r\n            requestOptions)\r\n            .then(data => {\r\n\r\n                const value = data.data;\r\n                return axios.put(`${config.apiUrl}films/${this.state.film.filmID}/meta`, value,\r\n                    options)\r\n                    .then(data => {\r\n\r\n                        this.props.dispatch(userActions.rate(meta.toString().toUpperCase()));\r\n\r\n                        this.setState({\r\n                            film: {\r\n                                ...this.state.film,\r\n                                'dislikes': data.data.thumbsDown,\r\n                                'likes': data.data.thumbsUp\r\n                            }\r\n                        });\r\n                    }).catch(err => {\r\n                        console.log(err);\r\n                        console.log(JSON.stringify(err));\r\n\r\n                    });\r\n\r\n            }).catch(err => {\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    checkRate = () => {\r\n\r\n        if (this.props.rated === 'CHECK_RATE') {\r\n\r\n            let user = JSON.parse(localStorage.getItem('user'));\r\n\r\n            if (!user)\r\n                return;\r\n\r\n            if (user.user.meta.liked.indexOf(this.state.film.filmID) > -1) {\r\n                this.props.dispatch(userActions.rate('LIKED'));\r\n            }\r\n\r\n            if (user.user.meta.disliked.indexOf(this.state.film.filmID) > -1) {\r\n                this.props.dispatch(userActions.rate('DISLIKED'));\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    handleSetThumbnail = (filmID) => {\r\n        this.setState({\r\n            film: {\r\n                ...this.state.film,\r\n                poster: \"https://thumbs.gfycat.com/VibrantHeavyFrogmouth-size_restricted.gif\"\r\n            }\r\n        }, () => {\r\n            this.props.history.push(`${pathName}film/` + filmID);\r\n            this.props.dispatch(userActions.rate('CHECK_RATE'));\r\n            window.scrollTo(0, 0);\r\n\r\n        })\r\n    };\r\n\r\n    handleSetThumbnailPlaylist = (filmID) => {\r\n        if( this.props.match.params.id !== filmID){\r\n            this.setState({\r\n                film: {\r\n                    ...this.state.film,\r\n                    poster: \"https://thumbs.gfycat.com/VibrantHeavyFrogmouth-size_restricted.gif\"\r\n                }\r\n            }, () => {\r\n                this.props.dispatch(userActions.rate('CHECK_RATE'));\r\n            })\r\n\r\n        }\r\n        window.scrollTo(0, 0);\r\n    };\r\n\r\n    handleLoadingFilms = (_State) => {\r\n        this.setState({isLoadingFilms: _State.isLoading});\r\n        this.setState({hasMoreFilms: _State.hasMore});\r\n    };\r\n\r\n    handleLoadingComments = (_State) => {\r\n        this.setState({isLoadingComments: _State.isLoading});\r\n    };\r\n\r\n    handleDeletePlaylist = () => {\r\n      this.setState({displayPlaylist: false});\r\n    };\r\n\r\n    componentDidMount() {\r\n\r\n        let params = queryString.parse(this.props.location.search);\r\n\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({\r\n            film: {\r\n                ...this.state.film,\r\n                filmID: this.props.match.params.id\r\n            }\r\n        }, () => {\r\n\r\n            axios.get(`${config.apiUrl}films/${this.props.match.params.id}/desc/no`)\r\n                .then(res => {\r\n\r\n                    const film = res.data;\r\n\r\n                    const requestParams = {\r\n                        headers: authHeader()\r\n                    };\r\n\r\n                    if (localStorage.getItem('user')) {\r\n\r\n                        axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                            .then(res => {\r\n\r\n\r\n                                if (res.data.meta.liked.indexOf(this.state.film.filmID) > -1) {\r\n                                    this.props.dispatch(userActions.rate('LIKED'));\r\n                                }\r\n\r\n                                if (res.data.meta.disliked.indexOf(this.state.film.filmID) > -1) {\r\n                                    this.props.dispatch(userActions.rate('DISLIKED'));\r\n                                }\r\n\r\n                            });\r\n                    }\r\n\r\n                    if (params && params.list) {\r\n                        this.setState({\r\n                            displayPlaylist: true,\r\n                            playlistHeight: this.filmElement.clientHeight,\r\n                            playlistID: params.list\r\n                        });\r\n                    }\r\n\r\n                    this.setState({\r\n                        film: {\r\n                            ...this.state.film,\r\n                            thumbnail: film.thumbnail,\r\n                            poster: `${config.apiUrl}films/${this.state.film.filmID}/thumbnail/${film.thumbnail._id}`,\r\n                            views: film.views + 1,\r\n                            title: film.title,\r\n                            description: film.description,\r\n                            likes: film.thumbsUp,\r\n                            dislikes: film.thumbsDown,\r\n                            videoSrc: `${config.apiUrl}films/${this.props.match.params.id}`,\r\n                            commentsLength: film.commentsLength\r\n                        },\r\n                        isMounted: true\r\n                    });\r\n\r\n                    this.updateMeta('views');\r\n\r\n\r\n                }).catch(err => {\r\n            })\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevProps.match.params.id !== this.props.match.params.id) {\r\n\r\n            source.cancel();\r\n            source = axios.CancelToken.source();\r\n\r\n            let params = queryString.parse(this.props.location.search);\r\n\r\n            this.setState({\r\n                isLoading: true,\r\n\r\n                film: {\r\n                    ...this.state.film,\r\n                    filmID: this.props.match.params.id,\r\n                },\r\n\r\n                isLoadingFilms: false,\r\n                isLoadingComments: false,\r\n\r\n                hasMoreFilms: true,\r\n                expanded: false,\r\n                truncated: false\r\n\r\n            }, () => {\r\n\r\n                axios.get(`${config.apiUrl}films/${this.props.match.params.id}/desc/no`, {\r\n                    cancelToken: source.token\r\n                })\r\n                    .then(res => {\r\n                        if (!params || !params.list) {\r\n                            this.setState({\r\n                                displayPlaylist: false,\r\n                                playlistHeight: 400,\r\n                                playlistID: null\r\n                            });\r\n                        } else {\r\n                            this.setState({\r\n                                displayPlaylist: true,\r\n                                playlistHeight: this.filmElement.clientHeight,\r\n                                playlistID: params.list\r\n                            });\r\n                        }\r\n\r\n                        const film = res.data;\r\n\r\n                        const requestParams = {\r\n                            headers: authHeader()\r\n                        };\r\n\r\n                        if (localStorage.getItem('user')) {\r\n\r\n                            axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                                .then(res => {\r\n\r\n\r\n                                    if (res.data.meta.liked.indexOf(this.state.film.filmID) > -1) {\r\n                                        this.props.dispatch(userActions.rate('LIKED'));\r\n                                    }\r\n\r\n                                    if (res.data.meta.disliked.indexOf(this.state.film.filmID) > -1) {\r\n                                        this.props.dispatch(userActions.rate('DISLIKED'));\r\n                                    }\r\n\r\n                                });\r\n                        }\r\n\r\n                        this.setState({\r\n                            film: {\r\n                                ...this.state.film,\r\n                                thumbnail: film.thumbnail,\r\n                                views: film.views + 1,\r\n                                title: film.title,\r\n                                description: film.description,\r\n                                likes: film.thumbsUp,\r\n                                dislikes: film.thumbsDown,\r\n                                videoSrc: `${config.apiUrl}films/${this.props.match.params.id}`,\r\n                                commentsLength: film.commentsLength\r\n                            },\r\n                            isMounted: true\r\n                        });\r\n\r\n                        this.setState({\r\n                            film: {\r\n                                ...this.state.film,\r\n                                poster: `${config.apiUrl}films/${this.state.film.filmID}/thumbnail/${film.thumbnail._id}`,\r\n                            }\r\n                        });\r\n\r\n                        this.updateMeta('views');\r\n\r\n\r\n                    }).catch(err => {\r\n                        console.log(JSON.stringify(err));\r\n                })\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const {rated} = this.props;\r\n        const {loggedIn} = this.props;\r\n        const {\r\n            expanded,\r\n            truncated\r\n        } = this.state;\r\n\r\n\r\n        this.checkRate();\r\n\r\n        return (\r\n\r\n\r\n            <Col>\r\n                <Row>\r\n                    <Col md={8}>\r\n                        {\r\n                                <Col className=\"mt-4\" sm={12}>\r\n                                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\"\r\n                                     ref={(filmElement) => this.filmElement = filmElement}>\r\n                                    <Player className=\"embed-responsive-item\"\r\n                                            playsInline\r\n                                            poster={this.state.film.poster}\r\n                                            src={this.state.film.videoSrc}\r\n                                    />\r\n                                </div>\r\n                            </Col>\r\n                        }\r\n\r\n                        {\r\n                            (this.state.isMounted && !this.state.isLoading) ?\r\n                                <Col className=\"pl-3 pr-3 mt-4\" sm={12}>\r\n                                    <Row>\r\n                                        <Col sm={12}>\r\n                                            <p className=\"font-weight-bold\">{this.state.film.title}</p>\r\n                                        </Col>\r\n                                        <Col xs={4} sm={4}>\r\n                                            <p><FontAwesomeIcon icon=\"eye\"/> &ensp;{this.state.film.views}</p>\r\n                                        </Col>\r\n                                        <Col xs={4} sm={4} className=\"text-right\">\r\n\r\n                                            <p className={`${loggedIn && rated === 'LIKED' ? \"blue\" : \"\"} font-weight-bold`}>\r\n                                                <FontAwesomeIcon cursor=\"pointer\"\r\n                                                                 onClick={() => this.updateMeta('liked')}\r\n                                                                 icon=\"thumbs-up\"/>\r\n                                                &ensp;{this.state.film.likes}</p>\r\n                                        </Col>\r\n                                        <Col xs={4} sm={4}>\r\n                                            <p className={`${loggedIn && rated === 'DISLIKED' ? \"blue\" : \"\"} font-weight-bold`}>\r\n                                                <FontAwesomeIcon cursor=\"pointer\"\r\n                                                                 onClick={() => this.updateMeta('disliked')}\r\n                                                                 icon=\"thumbs-down\"/>\r\n                                                &ensp;{this.state.film.dislikes}</p>\r\n                                        </Col>\r\n                                        <Col sm={12} className=\"mt-4 mb-4 divider\" />\r\n\r\n                                        <Col sm={12}>\r\n                                            <TextTruncate line={!expanded && 2}\r\n                                                          truncateText=\"\"\r\n                                                          text= {this.state.film.description}\r\n                                                          textTruncateChild={\r\n                                                              <span id=\"s-c-2\" >\r\n                                                                  <Button variant=\"link\" style={{display: 'block'}}\r\n                                                                          className=\"p-0 m-0 mb-1 title font-weight-bold\"\r\n                                                                          onClick={this.handleTruncate}>Read more</Button></span>\r\n\r\n                                                          }>\r\n\r\n                                            </TextTruncate>\r\n\r\n                                            {!truncated && expanded && (\r\n                                                <span style={{display: 'block'}} >\r\n                                                    <Button className=\"p-0 m-0 mb-1 title font-weight-bold\" variant=\"link\" onClick={this.toggleLines}>Show less</Button></span>\r\n                                            )}\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                                :\r\n                                this.state.isMounted ?\r\n                                <Col style={{height: 80}} sm={12}\r\n                                     className=\"pl-3 pr-3 mb-2 text-center justify-content-center d-flex align-items-center\">\r\n                                    {\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                null\r\n\r\n                        }\r\n                        <Col sm={12} className=\"mt-4 mb-2 divider d-block d-md-none\"/>\r\n                        {\r\n                            (this.state.displayPlaylist) && (this.state.windowWidth <= windowBreakpoint) && this.state.isMounted &&\r\n                            <Col\r\n                                className=\"p-0 d-block d-md-none\">\r\n                                <PlaylistComponent id={this.state.playlistID}\r\n                                                   filmID={this.props.match.params.id}\r\n                                                   filmElement={this.filmElement}\r\n                                                   history={this.props.history}\r\n                                                   windowWidth={this.state.windowWidth}\r\n\r\n                                                   handleSubmit={this.handleSetThumbnailPlaylist}\r\n                                                   handleDeletePlaylist={this.handleDeletePlaylist}\r\n                                />\r\n                            </Col>\r\n                        }\r\n                        {\r\n                            (this.state.windowWidth <= windowBreakpoint) && this.state.isMounted &&\r\n                            <Col className=\"mt-4 d-block d-md-none\">\r\n                                <FilmsPreviewComponent hasMoreFilms={this.state.hasMoreFilms}\r\n                                                       isLoading={this.state.isLoadingFilms}\r\n                                                       filmID={this.props.match.params.id}\r\n                                                       history={this.props.history}\r\n                                                       playlistID={this.state.playlistID}\r\n\r\n                                                       handleLoading={this.handleLoadingFilms}\r\n                                                       handleThumbnail={this.handleSetThumbnail}\r\n                                />\r\n                            </Col>\r\n                        }\r\n\r\n\r\n                        {\r\n                            ((this.state.windowWidth <= windowBreakpoint && !this.state.hasMoreFilms)  || (this.state.windowWidth > windowBreakpoint))\r\n                            && this.state.isMounted &&\r\n                            <Col className=\"p-0 \">\r\n                                <Col sm={12} className=\"mt-4 mb-2 divider\"/>\r\n                                <CommentsComponent isLoading={this.state.isLoadingComments}\r\n                                                   filmID={this.props.match.params.id}\r\n                                                   history={this.props.history}\r\n                                                   commentsLength={this.state.film.commentsLength}\r\n\r\n                                                   handleLoading={this.handleLoadingComments}\r\n                                />\r\n                            </Col>\r\n                        }\r\n\r\n\r\n                    </Col>\r\n\r\n                    {\r\n\r\n                        <Col sm={4}>\r\n\r\n                            {\r\n\r\n                                (this.state.displayPlaylist) && (this.state.windowWidth > windowBreakpoint) && this.state.isMounted &&\r\n                                <Col\r\n                                    className=\"p-0 d-none d-md-block\" sm={10}>\r\n                                    <PlaylistComponent id={this.state.playlistID}\r\n                                                       filmID={this.props.match.params.id}\r\n                                                       filmElement={this.filmElement}\r\n                                                       history={this.props.history}\r\n                                                       windowWidth={this.state.windowWidth}\r\n\r\n                                                       handleSubmit={this.handleSetThumbnailPlaylist}\r\n                                                       handleDeletePlaylist={this.handleDeletePlaylist}\r\n                                    />\r\n                                </Col>\r\n                            }\r\n\r\n                            {\r\n                                (this.state.windowWidth > windowBreakpoint) && this.state.isMounted &&\r\n                                <Col className=\"p-0 mt-4 d-none d-md-block\" sm={12}>\r\n                                    <FilmsPreviewComponent hasMoreFilms={this.state.hasMoreFilms}\r\n                                                           isLoading={this.state.isLoadingFilms}\r\n                                                           filmID={this.props.match.params.id}\r\n                                                           history={this.props.history}\r\n                                                           playlistID={this.state.playlistID}\r\n\r\n                                                           handleLoading={this.handleLoadingFilms}\r\n                                                           handleThumbnail={this.handleSetThumbnail}\r\n                                    />\r\n                                </Col>\r\n                            }\r\n\r\n\r\n                        </Col>\r\n                    }\r\n\r\n                </Row>\r\n\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    const {rated} = state.rate;\r\n\r\n    return {\r\n        loggedIn,\r\n        rated,\r\n    };\r\n}\r\n\r\n\r\nconst connectedFilmPage = connect(mapStateToProps)(FilmComponent);\r\n\r\nexport {connectedFilmPage as FilmComponent};\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Button, Col, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\n\r\nclass LoginComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            submitted: false,\r\n            show: true\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        const {name, value} = e.target;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true});\r\n        const {email, password} = this.state;\r\n        const {dispatch} = this.props;\r\n\r\n        if (email && password) {\r\n            dispatch(userActions.login(email, password));\r\n        }\r\n    }\r\n\r\n   handleForgotPassword = () => {\r\n        this.props.history.goBack();\r\n\r\n        setTimeout(function () {\r\n                this.props.history.push(`${this.props.location.pathname.slice(0, -5)}forgot${this.props.location.search}`);\r\n            }.bind(this),\r\n            500);\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.goBack();\r\n        };\r\n\r\n        let handleRegister = () => {\r\n            this.props.history.goBack();\r\n\r\n            setTimeout(function () {\r\n                    this.props.history.push(`${this.props.location.pathname.slice(0, -5)}register${this.props.location.search}`);\r\n                }.bind(this),\r\n                500);\r\n        };\r\n\r\n\r\n        const {loggingIn} = this.props;\r\n        const {alert} = this.props;\r\n        const {email, password, submitted} = this.state;\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Login\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmit}>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n                            <Form.Control isInvalid={submitted && !email} type=\"email\" name=\"email\" value={email}\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Email is required\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n                            <Form.Control isInvalid={submitted && !password} type=\"password\" name=\"password\"\r\n                                          value={password} onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Password is required\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Login\r\n                            </Button>\r\n\r\n                            {loggingIn &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                    {alert.message &&\r\n                    <Col className={`alert ${alert.type}`}>{alert.message}</Col>\r\n                    }\r\n\r\n                    <Button variant=\"link\" onClick={handleRegister} className=\"p-0 m-0 btn btn-link\">Register</Button>\r\n\r\n                    <Col className=\"p-0 m-0 \" xs={12} sm={12}>\r\n                        <Button variant=\"link\" onClick={this.handleForgotPassword} className=\"p-0 m-0 btn btn-link\">Forgot password?</Button>\r\n                    </Col>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggingIn} = state.auth;\r\n    const {alert} = state;\r\n    return {\r\n        loggingIn,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedLoginPage = connect(mapStateToProps)(LoginComponent);\r\nexport {connectedLoginPage as LoginComponent};","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Button, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\n\r\nclass RegisterComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.props.dispatch(userActions.logout());\r\n\r\n        this.state = {\r\n            user: {\r\n                nick: '',\r\n                email: '',\r\n                password: '',\r\n            },\r\n            submitted: false,\r\n            show: true\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        const {name, value} = e.target;\r\n        const {user} = this.state;\r\n        this.setState({\r\n            user: {\r\n                ...user,\r\n                [name]: value\r\n            }\r\n        });\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true});\r\n        const {user} = this.state;\r\n        const {dispatch} = this.props;\r\n\r\n        if (user.email && user.nick && user.password && user.password.length >= 6) {\r\n            dispatch(userActions.register(user));\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.goBack();\r\n        };\r\n\r\n        const {registering} = this.props;\r\n        const {user, submitted} = this.state;\r\n        const {alert} = this.props;\r\n\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Register\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmit}>\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"nick\">Nick</Form.Label>\r\n                            <Form.Control isInvalid={submitted && !user.nick} type=\"text\" name=\"nick\" value={user.nick}\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                Nick is required\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n                            <Form.Control\r\n                                isInvalid={(submitted && !user.email) || (alert.type === 'alert-danger' && alert.message)}\r\n                                type=\"email\" name=\"email\" value={user.email} onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                {\r\n                                    alert.message ? alert.message : \"Email is required\"\r\n                                }\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n                            <Form.Control isInvalid={submitted && (user.password.length < 6)} type=\"password\"\r\n                                          name=\"password\" value={user.password} maxLength=\"11\"\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                {\r\n                                    user.password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\r\n                                }\r\n\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Register\r\n                            </Button>\r\n\r\n                            {registering &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {registering} = state.registration;\r\n    const {alert} = state;\r\n    return {\r\n        registering,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedRegisterPage = connect(mapStateToProps)(RegisterComponent);\r\nexport {connectedRegisterPage as RegisterComponent};","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Collapse, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport queryString from 'query-string';\r\nimport _ from \"lodash\";\r\n\r\nimport \"./SearchComponent.css\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport Snackbar from \"@material-ui/core/Snackbar/Snackbar\";\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport Truncate from \"react-truncate\";\r\nimport {isMobile} from 'react-device-detect'\r\n\r\nconst pathName = config.pathName;\r\n\r\nlet filters = [\r\n    {id: 'last_hour', title: 'Last hour'},\r\n    {id: 'today', title: 'Today'},\r\n    {id: 'this_week', title: 'This week'},\r\n    {id: 'this_month', title: 'This month'},\r\n    {id: 'this_year', title: 'This year'},\r\n];\r\n\r\n\r\nclass SearchComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            films: [],\r\n            addOpenedIndex: -1,\r\n\r\n            click: false,\r\n\r\n            error: false,\r\n            hasMore: false,\r\n            isLoading: false,\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n            open: false,\r\n            openSnackbar: false,\r\n\r\n            filter: '',\r\n            sort: '',\r\n            dir: 1,\r\n            sorts: [\r\n                {id: 'upload_date', title: 'Upload date', dir: 1},\r\n                {id: 'view_count', title: 'View count', dir: 1},\r\n                {id: 'rating', title: 'Rating', dir: 1},\r\n            ]\r\n        };\r\n\r\n        window.onresize = () => {\r\n\r\n            this.setState({windowWidth: window.innerWidth});\r\n\r\n        };\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n        let params = queryString.parse(this.props.location.search);\r\n        console.log(params);\r\n\r\n        this.setState({\r\n            isLoading: true,\r\n            search: params.search,\r\n            dir: params.dir ? params.dir : 1,\r\n            sort: params.sort ? params.sort : '',\r\n            filter: params.filter ? params.filter : ''\r\n        }, () => {\r\n\r\n\r\n            axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${this.state.sort}&filter=${this.state.filter}&dir=${this.state.dir}`,\r\n                {params: {start: 0, limit: 5}})\r\n                .then(res => {\r\n                    const films = res.data;\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n\r\n                    this.setState({\r\n                        hasMore: films.length < 1000,\r\n                        films: [...this.state.films, ...films],\r\n                        isLoading: false\r\n                    });\r\n                }).catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (this.state.click) {\r\n            this.setState({click: false});\r\n            return;\r\n        }\r\n\r\n        let params = queryString.parse(this.props.location.search);\r\n        let prevParams = queryString.parse(prevProps.location.search);\r\n\r\n        if (_.isEqual(prevParams, params) === false) {\r\n            this.setState({\r\n                scroll: {\r\n                    scrollTop: document.documentElement.scrollTop,\r\n                    offsetHeight: document.documentElement.offsetHeight,\r\n                    innerHeight: window.innerHeight\r\n                }\r\n            });\r\n\r\n            console.log(\"COMPNENT UPDATED2\");\r\n\r\n            this.setState({\r\n\r\n                films: [],\r\n                addOpenedIndex: -1,\r\n\r\n                click: false,\r\n\r\n                error: false,\r\n                hasMore: false,\r\n                scroll: {},\r\n                windowWidth: window.innerWidth,\r\n\r\n                open: false,\r\n                openSnackbar: false,\r\n\r\n                isLoading: true,\r\n                search: params.search,\r\n                dir: params.dir ? params.dir : 1,\r\n                sort: params.sort ? params.sort : '',\r\n                filter: params.filter ? params.filter : ''\r\n\r\n            }, () => {\r\n\r\n                if (params.sort && params.sort !== '') {\r\n                    this.state.sorts.forEach(sort => {\r\n                        if (sort.id === params.sort) {\r\n                            sort.dir = parseInt(params.dir);\r\n                        }\r\n                    })\r\n                }\r\n\r\n                console.log(this.state.sorts);\r\n\r\n\r\n                axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${this.state.sort}&filter=${this.state.filter}&dir=${this.state.dir}`,\r\n                    {params: {start: 0, limit: 5}})\r\n                    .then(res => {\r\n                        const films = res.data;\r\n\r\n                        films.forEach(film => {\r\n                            film.add = false;\r\n                        });\r\n\r\n                        this.setState({\r\n                            hasMore: films.length < 1000,\r\n                            films: [...this.state.films, ...films],\r\n                            isLoading: false\r\n                        });\r\n                    }).catch(err => {\r\n                    console.log(err);\r\n                });\r\n\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    handleScroll = () => {\r\n\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n        const {\r\n            loadData,\r\n            state: {\r\n                error,\r\n                isLoading,\r\n                hasMore\r\n            }\r\n        } = this;\r\n        if (error || isLoading || !hasMore) return;\r\n        if ((window.innerHeight + document.documentElement.scrollTop) >= (document.body.offsetHeight - 150)) {\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({openSnackbar: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleCloseSnackbar = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n\r\n    loadData = () => {\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${this.state.sort}&filter=${this.state.filter}&dir=${this.state.dir}`,\r\n                {\r\n                    params: {\r\n                        start: this.state.films.length,\r\n                        limit: this.state.films.length < 5 ? 5 : this.state.films.length + 5\r\n                    }\r\n                })\r\n                .then(res => {\r\n                    const films = res.data;\r\n                    console.log(films);\r\n                    this.setState({\r\n                        hasMore: films.length < 1000,\r\n                        films: [...this.state.films, ...films],\r\n                        isLoading: false\r\n                    });\r\n                }).catch(err => {\r\n                console.log(err);\r\n            });\r\n        });\r\n    };\r\n\r\n    parseDate = (film) => {\r\n\r\n        let date = new Date(Date.parse(film.createdAt));\r\n        let today = new Date();\r\n\r\n\r\n\r\n        let time = Math.abs(Math.floor((\r\n            Date.UTC(\r\n                date.getFullYear(),\r\n                date.getMonth(),\r\n                date.getDate(),\r\n                date.getHours(),\r\n                date.getMinutes()) -\r\n            Date.UTC(\r\n                today.getFullYear(),\r\n                today.getMonth(),\r\n                today.getDate(),\r\n                today.getHours(),\r\n                today.getMinutes()))\r\n            / (1000 * 60)));\r\n\r\n        if (time / 60 >= 1) {\r\n            time /= 60;\r\n\r\n            if (time / 24 >= 1) {\r\n\r\n                time /= 24;\r\n\r\n                if (time / 30 >= 1) {\r\n\r\n                    time /= 30;\r\n\r\n                    if (time / 12 >= 1) {\r\n\r\n                        time = time / 12;\r\n                        time = Math.floor(time) + ' years ';\r\n\r\n                    } else {\r\n                        time = Math.floor(time) + ' months ';\r\n                    }\r\n\r\n                } else {\r\n                    time = Math.floor(time) + ' days ';\r\n                }\r\n\r\n            } else {\r\n                time = Math.floor(time) + ' hours ';\r\n            }\r\n        } else {\r\n            time = Math.floor(time) + ' minutes ';\r\n        }\r\n\r\n        time = time + 'ago';\r\n\r\n        return time;\r\n    };\r\n\r\n    setRedirect = (e, filmID) => {\r\n        console.log(e.target);\r\n\r\n        if (e && e.target && (e.target.id === \"s-c-1\"\r\n            || e.target.id === \"s-c-2\" || e.target.id === \"s-c-3\" || e.target.id === \"s-c-4\"\r\n            || (e.target.localName === \"path\" && e.target.parentElement && e.target.parentElement.parentElement\r\n                && e.target.parentElement.parentElement.id !== \"a-b-2\"))) {\r\n            this.props.history.push(`${pathName}film/` + filmID);\r\n        }\r\n\r\n    };\r\n\r\n\r\n    handleOnclick = (state, type) => {\r\n\r\n        this.setState({click: true});\r\n\r\n        let filter = this.state.filter;\r\n        let sort = this.state.sort;\r\n        let dir = this.state.dir;\r\n\r\n        console.log(state);\r\n\r\n        if (state === 'filter') {\r\n            if (this.state.filter === type.id) {\r\n                this.setState({filter: ''});\r\n                sort = this.state.sort;\r\n                filter = '';\r\n                dir = this.state.dir;\r\n            } else {\r\n                this.setState({filter: type.id});\r\n                sort = this.state.sort;\r\n                filter = type.id;\r\n                dir = this.state.dir;\r\n            }\r\n        } else {\r\n            if (this.state.sort === type.id) {\r\n                sort = type.id;\r\n\r\n                if (type.dir === 1) {\r\n                    type.dir = -1;\r\n                    this.setState({dir: -1});\r\n                    dir = type.dir;\r\n                } else if (type.dir === -1) {\r\n                    this.setState({sort: ''});\r\n                    filter = this.state.filter;\r\n                    type.dir = 1;\r\n                    sort = '';\r\n                    this.setState({dir: 1});\r\n                }\r\n\r\n\r\n                console.log(type.dir);\r\n                console.log(this.state.dir);\r\n\r\n\r\n            } else {\r\n                this.setState({sort: type.id});\r\n                filter = this.state.filter;\r\n                sort = type.id;\r\n                dir = type.dir;\r\n            }\r\n\r\n        }\r\n\r\n\r\n        if (sort !== '' && filter !== '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}&sort=${sort}&dir=${dir}&filter=${filter}`,\r\n            });\r\n\r\n        } else if (sort === '' && filter !== '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}&filter=${filter}`,\r\n            });\r\n        } else if (sort !== '' && filter === '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}&sort=${sort}&dir=${dir}`,\r\n            });\r\n        } else if (sort === '' && filter === '') {\r\n            this.props.history.push({\r\n                search: `?search=${this.state.search}`,\r\n            });\r\n        }\r\n\r\n\r\n        axios.get(`${config.apiUrl}films/filter/title/?search=${this.state.search}&sort=${sort}&filter=${filter}&dir=${dir}`,\r\n            {params: {start: 0, limit: this.state.films.length < 5 ? 5 : this.state.films.length}})\r\n            .then(result => {\r\n                const films = result.data;\r\n                this.setState({films: films});\r\n\r\n            }).catch(err => {\r\n        });\r\n\r\n    };\r\n\r\n    render() {\r\n        const {scroll} = this.state;\r\n        const {open} = this.state;\r\n\r\n        return (\r\n            <Col>\r\n\r\n                <Button\r\n                    onClick={() => this.setState({open: !open})}\r\n                    aria-controls=\"filter-collapse\"\r\n                    aria-expanded={open}\r\n                    className=\"mt-3 p-2 button-my\"><FontAwesomeIcon style={{cursor: \"pointer\"}} icon=\"filter\"/></Button>\r\n\r\n                <Collapse in={this.state.open}>\r\n                    <Row id=\"filter-collapse\">\r\n                        <Col className=\"mt-4\" sm={4}>\r\n                            <p style={{'fontWeight': 500}}>UPLOAD DATE</p>\r\n\r\n                            <Col sm={8} className=\"mt-3 mb-3 divider\"/>\r\n\r\n\r\n                            {\r\n                                filters.map((filter) => {\r\n                                    return (<p key={filter.id} style={this.state.filter === filter.id ? {\r\n                                            fontWeight: 700,\r\n                                            fontSize: 80 + '%'\r\n                                        } :\r\n                                        {fontWeight: 400, fontSize: 80 + '%'}}\r\n                                               onClick={() => this.handleOnclick('filter', filter)}\r\n                                               className=\"filter-search\">{filter.title}</p>)\r\n                                })\r\n                            }\r\n\r\n                        </Col>\r\n\r\n                        <Col className=\"mt-4\" sm={4}>\r\n                            <p style={{'fontWeight': 500}}>SORT BY</p>\r\n\r\n                            <Col sm={8} className=\"mt-3 mb-3 divider\"/>\r\n\r\n                            {\r\n                                this.state.sorts.map((sort) => {\r\n                                    return (<Row key={sort.id} className=\"ml-0\">\r\n                                        <p style={this.state.sort === sort.id ? {\r\n                                                fontWeight: 700,\r\n                                                fontSize: 80 + '%'\r\n                                            } :\r\n                                            {fontWeight: 400, fontSize: 80 + '%'}}\r\n                                           onClick={() => this.handleOnclick('sort', sort)}\r\n                                           className=\"filter-search\">{sort.title}</p>\r\n                                        {this.state.sort === sort.id && sort.dir === 1 ?\r\n                                            <FontAwesomeIcon className=\"ml-2\" icon=\"sort-up\"/> :\r\n                                            this.state.sort === sort.id && sort.dir === -1 ?\r\n                                                <FontAwesomeIcon className=\"ml-2\" icon=\"sort-down\"/> : \"\"}\r\n                                    </Row>)\r\n                                })\r\n                            }\r\n\r\n                        </Col>\r\n\r\n                    </Row>\r\n                </Collapse>\r\n\r\n                <Col sm={12} className=\"mt-2 mb-3 divider\"/>\r\n\r\n                <Row>\r\n\r\n                    {\r\n                        <Col className=\"mt-4\">\r\n                            {\r\n                                this.state.films.map((film, index) => {\r\n                                        let time = this.parseDate(film);\r\n\r\n                                        let lines = this.state.windowWidth < 1200 && this.state.windowWidth > 576 ? 1 : 2;\r\n\r\n                                        return <Col xs={12} sm={12} lg={8} className=\"film-preview-holder mb-1 container-search\"\r\n                                                    onClick={(e) => this.setRedirect(e, film.id)} key={film.id}>\r\n                                            <Row className=\"d-sm-none mb-4\">\r\n                                                <Col xs={8} sm={4}>\r\n                                                    <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                        <img alt=\"\" id=\"s-c-1\" className=\"image embed-responsive-item\"\r\n                                                             src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=250`}/>\r\n                                                        <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                    </div>\r\n                                                </Col>\r\n                                                <Col xs={4} sm={8} className=\"p-0\">\r\n                                                    <Row className=\"m-0\">\r\n                                                        <Col xs={10} sm={10} className=\"p-0\">\r\n\r\n                                                            <TextTruncate line={1} id=\"s-c-2\"\r\n                                                               className=\"mb-1 title-search font-weight-bold\" text={film.title}/>\r\n                                                        </Col>\r\n\r\n                                                        <PlaylistAddButtonComponent parentName=\"search\"\r\n                                                                                    filmID={film.id}\r\n                                                                                    show={film.add} index={index}\r\n                                                                                    handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                                                                    handleClick={this.handleCreatePlaylistClick}\r\n                                                                                    handleClickOutside={this.handleClickOutside}\r\n                                                                                    handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n                                                    </Row>\r\n                                                    <p id=\"s-c-3\" className=\"mb-0 author-nick\">\r\n                                                        <small>{film.author_name} &#183; {film.views} views</small>\r\n                                                    </p>\r\n\r\n                                                </Col>\r\n                                            </Row>\r\n\r\n                                            <Col className=\"d-none d-sm-inline\">\r\n                                                <Row className=\"style-search\">\r\n                                                    <Col xs={8} sm={4}>\r\n                                                        <div\r\n                                                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                                                            <img alt=\"\" id=\"s-c-1\" className=\"image embed-responsive-item\"\r\n                                                                 src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=250`}/>\r\n                                                            <FontAwesomeIcon className=\"middle\" icon=\"play\"/>\r\n                                                        </div>\r\n                                                    </Col>\r\n                                                    <Col xs={4} sm={8} className=\"p-0 \">\r\n                                                        <Row className=\"m-0\">\r\n                                                            <Col xs={10} sm={10} className=\"p-0 mb-1\">\r\n                                                                <Truncate lines={lines} id=\"s-c-2\"\r\n                                                                   className=\"mb-0 title-search font-weight-bold\">\r\n                                                                   {film.title}\r\n                                                                </Truncate>\r\n                                                            </Col>\r\n\r\n                                                            <PlaylistAddButtonComponent parentName=\"search\"\r\n                                                                                        filmID={film.id}\r\n                                                                                        show={film.add} index={index}\r\n                                                                                        handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                                                                        handleClick={this.handleCreatePlaylistClick}\r\n                                                                                        handleClickOutside={this.handleClickOutside}\r\n                                                                                        handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n                                                        </Row>\r\n                                                        <p id=\"s-c-3\" className=\"mb-1 author-nick-search\">\r\n                                                            <small>{film.author_name} &#183; {film.views} views &#183; {time}</small>\r\n                                                        </p>\r\n\r\n                                                        <small><TextTruncate id=\"s-c-4\" className=\"mb-0 author-nick-search\"\r\n                                                                      line={lines} text={film.description} /></small>\r\n\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </Col>\r\n                                        </Col>\r\n\r\n\r\n                                    }\r\n                                )\r\n                            }\r\n\r\n                        </Col>\r\n                    }\r\n\r\n                </Row>\r\n\r\n                {\r\n\r\n\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={3000}\r\n                    onClose={this.handleCloseSnackbar}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedSearchPage = connect(mapStateToProps)(SearchComponent);\r\n\r\n\r\nexport {connectedSearchPage as SearchComponent};\r\n","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport Button from '@material-ui/core/Button';\r\nimport {userActions} from \"../../actions\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass AllPlaylistsComponent extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            playlists: [],\r\n\r\n\r\n            error: false,\r\n            hasMore: false,\r\n            isLoading: false,\r\n\r\n            scroll: {},\r\n            windowWidth: window.innerWidth,\r\n\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        if (localStorage.getItem('user')) {\r\n\r\n            axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                .then(res => {\r\n                }).catch(err => {\r\n                console.log(err);\r\n                console.log(JSON.stringify(err));\r\n                this.props.dispatch(userActions.logout());\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        this.setState({isLoading: true}, () => {\r\n            let limit = 3;\r\n            const {windowWidth} = this.state;\r\n\r\n            if (windowWidth <= 576)\r\n                limit = 1.3;\r\n            else if (windowWidth > 1920)\r\n                limit = 6;\r\n            else if (windowWidth > 1422)\r\n                limit = 5;\r\n\r\n            axios.get(`${config.apiUrl}playlists/all`, {params: {start: 0, limit: Math.ceil(6 * limit)}})\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n\r\n                    this.setState({\r\n                        hasMore: playlists.length >= Math.ceil(6 * limit),\r\n                        playlists: playlists,\r\n                        isLoading: false\r\n                    });\r\n                });\r\n        });\r\n\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n\r\n    handleScroll = () => {\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n        const {\r\n            loadData,\r\n            state: {\r\n                error,\r\n                isLoading,\r\n                hasMore\r\n            }\r\n        } = this;\r\n\r\n        if (error || isLoading || !hasMore) return;\r\n\r\n        if ((window.innerHeight + document.documentElement.scrollTop) >= (document.body.offsetHeight - 150)) {\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n\r\n\r\n    loadData = () => {\r\n        this.setState({isLoading: true}, () => {\r\n            axios.get(`${config.apiUrl}playlists/all`, {params: {start: this.state.playlists.length, limit: 6}})\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n                    this.setState({\r\n                        hasMore: (playlists.length === 6),\r\n                        isLoading: false,\r\n                        playlists: [\r\n                            ...this.state.playlists,\r\n                            ...playlists]\r\n                    });\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false\r\n                    })\r\n                });\r\n        })\r\n    };\r\n\r\n    setRedirect = (playlistID, filmID) => {\r\n        this.props.history.push({\r\n            pathname: `${pathName}film/` + filmID,\r\n            search: `?list=${playlistID}`\r\n        });\r\n    };\r\n\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n        const {scroll} = this.state;\r\n\r\n        return (\r\n            <Col>\r\n\r\n\r\n                <Row className=\"mt-5\">\r\n\r\n                    {\r\n                        this.state.playlists.map((playlist, index) => {\r\n\r\n\r\n                                const filmID = playlist.filmThumbnail ? playlist.filmThumbnail : playlist.films[0];\r\n\r\n                                const playlistID = playlist.id;\r\n\r\n                                if(!playlist.thumbnail)\r\n                                    return null;\r\n\r\n                                return <Col className=\"mb-5 film-preview-holder\" xs={6} sm={4} md={3} lg={2} key={playlist.id}>\r\n                                    <div onClick={() => this.setRedirect(playlistID, filmID)}\r\n                                         className=\"embed-responsive embed-responsive-16by9 z-depth-1-half container\">\r\n                                        {\r\n                                            <img\r\n                                                alt=\"\"\r\n                                                className=\"embed-responsive-item image\"\r\n                                                src={`${config.apiUrl}films/${filmID}/thumbnail/${playlist.thumbnail}?width=250`}\r\n                                                onClick={() => this.setRedirect(playlistID, filmID)}/>\r\n                                        }\r\n                                        <Row className=\"middle\">\r\n                                            <Col xs={4} sm={4}>\r\n                                                <FontAwesomeIcon icon=\"play\"/>\r\n                                            </Col>\r\n                                            <Col xs={8} sm={8}>\r\n                                                <small className=\"font-weight-bold\" >Play all</small>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </div>\r\n\r\n                                    <p className=\"mb-1\">\r\n                                        <small className=\"font-weight-bolder\">{playlist.title}</small>\r\n                                    </p>\r\n\r\n                                    <p className=\"mb-0 author-nick\">\r\n                                        <small>{playlist.authorName}</small>\r\n                                    </p>\r\n\r\n                                </Col>\r\n\r\n\r\n                            }\r\n                        )\r\n\r\n\r\n                    }\r\n\r\n                </Row>\r\n                {\r\n                    ((scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) && this.state.hasMore) &&\r\n                    <Col sm={12} className=\"text-center\">\r\n                        <Button\r\n                            className=\"button-my\"\r\n                            variant=\"contained\"\r\n                            disabled={isLoading}\r\n                            onClick={!isLoading ? this.loadData : null}\r\n                        >\r\n                            {isLoading ? 'Loading' : 'Click to load'}\r\n                        </Button>\r\n                    </Col>\r\n\r\n\r\n                }\r\n                {\r\n\r\n\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedAllPlaylistsComponent = connect(mapStateToProps)(AllPlaylistsComponent);\r\n\r\n\r\nexport {connectedAllPlaylistsComponent as AllPlaylistsComponent};\r\n","import React, {Component} from 'react';\r\nimport {Button, Col, FormControl, Row} from \"react-bootstrap\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './AddFilmComponent.css'\r\n\r\nimport FileDrop from 'react-file-drop';\r\nimport {config} from \"../../config\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport axios from \"axios\";\r\n\r\nconst CHOOSE_FILM = `Choose a film `;\r\nconst CHOOSE_THUMBNAIL = `Choose a thumbnail `;\r\nconst pathName = config.pathName;\r\n\r\nclass AddFilmComponent extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            title: '',\r\n            description: '',\r\n            submitted: false,\r\n\r\n            film: null,\r\n            filmName: CHOOSE_FILM,\r\n            filmPreview: null,\r\n\r\n            thumbnail: null,\r\n            thumbnailName: CHOOSE_THUMBNAIL,\r\n            thumbnailPreview: null,\r\n\r\n            isLoading: false,\r\n            alert: {type: \"\", message: \"\"}\r\n        };\r\n\r\n        this.filmInput = React.createRef();\r\n        this.thumbnailInput = React.createRef();\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleFileChoose = this.handleFileChoose.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        console.log(e.target);\r\n        const {name, value} = e.target;\r\n        this.setState({[name]: value});\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true});\r\n\r\n        if (!localStorage.getItem('user')) {\r\n            this.props.history.push(`${pathName}add/login`);\r\n            return;\r\n        }\r\n\r\n        const requestOptions = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        let film = new FormData();\r\n        film.set('title', this.state.title);\r\n        film.set('description', this.state.description);\r\n        film.set('file', this.state.film);\r\n        film.set('thumbnail', this.state.thumbnail);\r\n\r\n\r\n        console.log(film);\r\n\r\n        this.setState({isLoading: true}, () =>\r\n            axios.post(`${config.apiUrl}films`,\r\n                film, requestOptions)\r\n\r\n                .then((response) => {\r\n                    console.log(response);\r\n                    this.props.history.push(`${pathName}film/${response.data.id}`);\r\n\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error);\r\n                    console.log(JSON.stringify(error));\r\n                    console.log(error.response.data);\r\n\r\n                    if (error.response.data.error) {\r\n                        this.setState({\r\n                            isLoading: false,\r\n                            alert: {type: \"alert-danger\", message: error.response.data.error}\r\n                        });\r\n                        if (error.response.status === 422) {\r\n                            this.setState({\r\n                                film: null,\r\n                                filmName: CHOOSE_FILM,\r\n                                filmPreview: null,\r\n\r\n                                thumbnail: null,\r\n                                thumbnailName: CHOOSE_THUMBNAIL,\r\n                                thumbnailPreview: null,\r\n                            })\r\n                        }\r\n                    } else if (error.response.data.errors) {\r\n                        if (error.response.data.errors.description)\r\n                            this.setState({\r\n                                isLoading: false,\r\n                                alert: {type: \"alert-danger\", message: error.response.data.errors.description.message}\r\n                            });\r\n                        else if (error.response.data.errors.title)\r\n                            this.setState({\r\n                                isLoading: false,\r\n                                alert: {type: \"alert-danger\", message: error.response.data.errors.title.message}\r\n                            })\r\n                    }\r\n\r\n                }));\r\n\r\n    }\r\n\r\n    handleFileChoose(event, type) {\r\n        event.preventDefault();\r\n        console.log(event);\r\n        switch (type) {\r\n            case 'film':\r\n                this.setState({\r\n                    film: this.filmInput.current.files[0],\r\n                    filmName: this.filmInput.current.files[0].name,\r\n                    filmPreview: URL.createObjectURL(event.target.files[0])\r\n                });\r\n                break;\r\n\r\n            case 'thumbnail':\r\n                this.setState({\r\n                    thumbnail: this.thumbnailInput.current.files[0],\r\n                    thumbnailName: this.thumbnailInput.current.files[0].name,\r\n                    thumbnailPreview: URL.createObjectURL(event.target.files[0])\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleDropFilm = (files, event) => {\r\n        this.setState({\r\n            film: files[0],\r\n            filmName: files[0].name,\r\n            filmPreview: URL.createObjectURL(files[0])\r\n        });\r\n        console.log(files, event);\r\n    };\r\n\r\n    handleDropThumbnail = (files, event) => {\r\n        this.setState({\r\n            thumbnail: files[0],\r\n            thumbnailName: files[0].name,\r\n            thumbnailPreview: URL.createObjectURL(files[0])\r\n        });\r\n        console.log(files, event);\r\n    };\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n\r\n        return (\r\n            <Row className=\"mt-4 mr-2 ml-2\" sm={12}>\r\n                <Col className=\"mb-4\" sm={6} lg={5}>\r\n\r\n                    <Col  className=\"mb-4 ml-auto mr-auto\" xs={10}  sm={12} lg={10} >\r\n                        <div\r\n                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                            <FileDrop onDrop={this.handleDropFilm}\r\n                                      className=\"justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\r\n                                <input id=\"film\" accept=\"video/mp4, video/ogg\"\r\n                                       onChange={event => this.handleFileChoose(event, 'film')}\r\n                                       type=\"file\" ref={this.filmInput} className=\"inputfile\"/>\r\n                                <label htmlFor=\"film\">\r\n\r\n                                    {\r\n                                        this.state.filmName === CHOOSE_FILM &&\r\n                                        <span>{this.state.filmName}</span>\r\n                                    }\r\n                                </label>\r\n\r\n                                {\r\n                                    this.state.filmName === CHOOSE_FILM &&\r\n                                    <span>or drop it here</span>\r\n                                }\r\n                                {\r\n                                    this.state.filmPreview &&\r\n                                    <video muted={true} autoPlay={true} className=\"embed-responsive-item\"\r\n                                           src={this.state.filmPreview}/>\r\n                                }\r\n                            </FileDrop>\r\n                        </div>\r\n                    </Col>\r\n                    <Col className=\"ml-auto mr-auto\" xs={10} sm={12} lg={10}>\r\n                        <div\r\n                            className=\"embed-responsive embed-responsive-16by9 z-depth-1-half\">\r\n                            <FileDrop onDrop={this.handleDropThumbnail}\r\n                                      className=\"justify-content-center d-flex align-items-center embed-responsive-item text-center box has-advanced-upload\">\r\n                                <input id=\"thumbnail\" accept=\"image/jpg, image/png, image/jpeg\"\r\n                                       onChange={event => this.handleFileChoose(event, 'thumbnail')}\r\n                                       type=\"file\" ref={this.thumbnailInput} className=\" inputfile\"/>\r\n                                <label htmlFor=\"thumbnail\">\r\n\r\n                                    {\r\n                                        this.state.thumbnailName === CHOOSE_THUMBNAIL &&\r\n                                        <span>{this.state.thumbnailName}</span>\r\n                                    }\r\n                                </label>\r\n\r\n                                {\r\n                                    this.state.thumbnailName === CHOOSE_THUMBNAIL &&\r\n                                    <span>or drop it here</span>\r\n                                }\r\n                                {\r\n                                    this.state.thumbnailPreview &&\r\n                                    <img alt=\"\"\r\n                                         className=\"embed-responsive-item\"\r\n                                         src={this.state.thumbnailPreview}/>\r\n                                }\r\n                            </FileDrop>\r\n                        </div>\r\n\r\n                    </Col>\r\n                </Col>\r\n                <Col className=\"mb-2\" sm={6} lg={5}>\r\n\r\n                    <Col className=\"mb-3\" sm={12}>\r\n                        <FormControl\r\n                            placeholder=\"Title\"\r\n                            aria-label=\"Title\"\r\n                            aria-describedby=\"basic-addon1\"\r\n                            name=\"title\"\r\n                            value={this.state.title}\r\n                            onChange={this.handleChange}\r\n                        />\r\n\r\n                    </Col>\r\n\r\n                    <Col className=\"mb-3\" sm={12}>\r\n                        <FormControl\r\n                            placeholder=\"Description\"\r\n                            as=\"textarea\" aria-label=\"With textarea\"\r\n                            name=\"description\"\r\n                            value={this.state.description}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                    </Col>\r\n\r\n                    <Col className=\"mb-3\" sm={12}>\r\n                        <Button variant=\"primary\"\r\n                                disabled={isLoading}\r\n                                onClick={!isLoading ? this.handleSubmit : null}\r\n                        >\r\n                            {isLoading ? 'Loading' : 'Add'}\r\n                        </Button>\r\n                    </Col>\r\n                    {this.state.alert.message &&\r\n                    <Col className={`alert ${this.state.alert.type}`}>{this.state.alert.message}</Col>\r\n                    }\r\n                </Col>\r\n\r\n\r\n            </Row>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedAddPage = connect(mapStateToProps)(AddFilmComponent);\r\nexport {connectedAddPage as AddFilmComponent};","import React, {Component} from 'react';\r\nimport {Col} from \"react-bootstrap\";\r\n\r\nimport error_404 from '../../images/error-404.png'; // Tell Webpack this JS file uses this image\r\n\r\nclass NotFoundComponent extends Component{\r\n\r\n\r\n    render(){\r\n        return(\r\n            <Col xs={12} sm={12} className=\"embed-responsive embed-responsive-16by9\">\r\n                <img className=\"embed-responsive-item\" src={error_404}\r\n                     alt=\"\" />\r\n            </Col>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NotFoundComponent;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Alert, Button, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\nimport {config} from \"../../config\";\r\nimport axios from 'axios';\r\n\r\nconst pathName = config.pathName;\r\nclass ResetPasswordComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.props.dispatch(userActions.logout());\r\n\r\n        this.state = {\r\n            user: {\r\n                password: '',\r\n            },\r\n            submitted: false,\r\n            show: true,\r\n\r\n            resetRequested: false,\r\n            resetSuccessful: false,\r\n            resetError: false,\r\n\r\n            errorMessage: ''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmitPasswordChange = this.handleSubmitPasswordChange.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({submitted: false, resetError: false});\r\n\r\n        const {name, value} = e.target;\r\n        const {user} = this.state;\r\n        this.setState({\r\n            user: {\r\n                ...user,\r\n                [name]: value\r\n            }\r\n        });\r\n    }\r\n\r\n    handleSubmitPasswordChange(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({submitted: true, resetRequested: true, resetError: false});\r\n\r\n        const {user} = this.state;\r\n\r\n        console.log(this.props.match.params.token);\r\n\r\n        if (this.props.match.params.token && user.password && user.password.length >= 6) {\r\n            axios.post(`${config.apiUrl}users/password/reset/${this.props.match.params.token}`,\r\n                {password: this.state.user.password})\r\n                .then(res => {\r\n\r\n                    this.setState({resetSuccessful: true, resetRequested: false});\r\n\r\n                    setTimeout(function () {\r\n                        this.setState({show: false});\r\n                        this.props.history.push(`${pathName}`);\r\n                        setTimeout(function () {\r\n                            this.props.history.push(`${pathName}login`);\r\n                        }.bind(this), 500);\r\n                    }.bind(this), 1500);\r\n\r\n                    console.log(res);\r\n\r\n                })\r\n                .catch(err => {\r\n                    console.log(JSON.stringify(err));\r\n\r\n                    let errorMessage = '';\r\n\r\n                    if(err.response && err.response.data && err.response.data.errors)\r\n                        errorMessage = err.response.data.errors;\r\n\r\n                    this.setState({resetError: true, resetSuccessful: false, resetRequested: false, errorMessage: errorMessage});\r\n\r\n                })\r\n        }else{\r\n            this.setState({resetRequested: false});\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.push(`${pathName}`);\r\n        };\r\n\r\n        const {user, submitted, resetSuccessful, resetRequested, resetError, errorMessage} = this.state;\r\n\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Register\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmitPasswordChange}>\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"password\">Password</Form.Label>\r\n                            <Form.Control isInvalid={submitted && (user.password.length < 6 )} type=\"password\"\r\n                                          name=\"password\" value={user.password} maxLength=\"11\"\r\n                                          onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type={\"invalid\"}>\r\n                                {\r\n                                    user.password.length === 0 ? \"Password is required\" : \"Password too short (min 6 chars)\"\r\n                                }\r\n\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n                        {\r\n                            resetSuccessful &&\r\n                            <Alert variant=\"success\">\r\n                                Password has been reseated! Redirecting to login page.\r\n                            </Alert>\r\n                        }\r\n\r\n                        {\r\n                            resetError &&\r\n                            <Alert variant=\"danger\">\r\n                                {errorMessage ? errorMessage : 'Error while resetting password.'}\r\n                            </Alert>\r\n                        }\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Reset password\r\n                            </Button>\r\n\r\n                            {resetRequested &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {registering} = state.registration;\r\n    const {alert} = state;\r\n    return {\r\n        registering,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedResetPasswordComponent = connect(mapStateToProps)(ResetPasswordComponent);\r\nexport {connectedResetPasswordComponent as ResetPasswordComponent};","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {Alert, Button, Form, Modal} from 'react-bootstrap';\r\n\r\nimport {userActions} from \"../../actions\";\r\nimport {config} from \"../../config\";\r\nimport axios from 'axios';\r\n\r\n\r\nclass ForgotPasswordComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.props.dispatch(userActions.logout());\r\n\r\n        this.state = {\r\n            user: {\r\n                email: ''\r\n            },\r\n            submitted: false,\r\n            show: true,\r\n\r\n            emailSending: false,\r\n            emailSend: false,\r\n            emailError: false,\r\n\r\n            errorMessage: ''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmitForgotRequest = this.handleSubmitForgotRequest.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({emailError: false});\r\n\r\n        const {name, value} = e.target;\r\n        const {user} = this.state;\r\n        this.setState({\r\n            user: {\r\n                ...user,\r\n                [name]: value\r\n            }\r\n        });\r\n    }\r\n\r\n    handleSubmitForgotRequest(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({emailSending: true, emailError: false, errorMessage: ''});\r\n\r\n        axios.post(`${config.apiUrl}users/password/forgot`, {email: this.state.user.email} )\r\n            .then(res => {\r\n                console.log(res);\r\n                this.setState({emailSend: true, emailSending: false});\r\n            })\r\n            .catch(err => {\r\n                console.log(JSON.stringify(err));\r\n\r\n                let errorMessage = '';\r\n\r\n                if(err.response && err.response.data && err.response.data.errors)\r\n                    errorMessage = err.response.data.errors;\r\n\r\n                this.setState({emailError: true, emailSending: false, errorMessage: errorMessage});\r\n\r\n            })\r\n    };\r\n\r\n    render() {\r\n\r\n        let modalClose = () => {\r\n            this.setState({show: false});\r\n            this.props.history.goBack();\r\n        };\r\n\r\n        const {user, submitted, emailSending, emailSend, emailError, errorMessage} = this.state;\r\n\r\n        return (\r\n\r\n            <Modal\r\n                onHide={modalClose}\r\n                show={this.state.show}\r\n                size=\"lg\"\r\n                aria-labelledby=\"contained-modal-title-vcenter\"\r\n                centered\r\n            >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                        Register\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form onSubmit={this.handleSubmitForgotRequest}>\r\n                        <Form.Group>\r\n                            <Form.Label htmlFor=\"email\">Email</Form.Label>\r\n                            <Form.Control\r\n                                isInvalid={(submitted && !user.email) || (alert.type === 'alert-danger' && alert.message)}\r\n                                type=\"email\" name=\"email\" value={user.email} onChange={this.handleChange}>\r\n                            </Form.Control>\r\n                            <Form.Control.Feedback type=\"invalid\">\r\n                                {\r\n                                    alert.message ? alert.message : \"Email is required\"\r\n                                }\r\n                            </Form.Control.Feedback>\r\n                        </Form.Group>\r\n\r\n\r\n\r\n                        {\r\n                            emailSend &&\r\n                            <Alert variant=\"success\">\r\n                                Email with link to reset password has been sent.\r\n                            </Alert>\r\n                        }\r\n\r\n                        {\r\n                            emailError &&\r\n                            <Alert variant=\"danger\">\r\n                                {errorMessage ? errorMessage : \"Error while sending email.\" }\r\n                            </Alert>\r\n                        }\r\n\r\n                        <Form.Group>\r\n                            <Button type=\"submit\" className=\"btn-primary\">\r\n                                Reset password\r\n                            </Button>\r\n\r\n                            {emailSending &&\r\n                            <img alt=\"loading...\" className=\"pl-2\"\r\n                                 src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\"/>\r\n                            }\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button onClick={modalClose}>Close</Button>\r\n                </Modal.Footer>\r\n\r\n\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {registering} = state.registration;\r\n    const {alert} = state;\r\n    return {\r\n        registering,\r\n        alert\r\n    };\r\n}\r\n\r\nconst connectedForgotPasswordComponent = connect(mapStateToProps)(ForgotPasswordComponent);\r\nexport {connectedForgotPasswordComponent as ForgotPasswordComponent};","import {Redirect, Route} from \"react-router\";\r\nimport React from \"react\";\r\nimport {config} from \"../config\";\r\n\r\nlet pathName = config.pathName;\r\n\r\nexport const PrivateRoute = ({component: Component, ...rest}) => {\r\n    return <Route\r\n        {...rest}\r\n        render={props =>\r\n            localStorage.getItem(\"user\") ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect to={{\r\n                    pathname: `${pathName}login`,\r\n                    state: {from: props.location}\r\n                }}/>\r\n            )\r\n        }/>\r\n};","import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Col, Row, Spinner} from 'react-bootstrap';\r\n\r\nimport {config} from \"../../config\";\r\n\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\r\nimport {userActions} from \"../../actions\";\r\nimport {authHeader} from \"../../helpers\";\r\nimport {PlaylistAddButtonComponent} from \"../Playlist/PlaylistAddButtonComponent\";\r\nimport TextTruncate from \"react-text-truncate\";\r\nimport {isMobile} from 'react-device-detect'\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport connect from \"react-redux/es/connect/connect\";\r\n\r\nconst pathName = config.pathName;\r\n\r\nclass ProfileComponent extends Component {\r\n\r\n\r\n    handleScroll = () => {\r\n        if (this.state.addOpenedIndex >= 0 && !isMobile) {\r\n            let array = this.state.films;\r\n            array[this.state.addOpenedIndex].add = false;\r\n\r\n            this.setState({films: array, addOpenedIndex: -1});\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    handleResize = () => {\r\n        this.setState({windowWidth: window.innerWidth});\r\n    };\r\n\r\n    handlePlaylistOperation = (message) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: -1})\r\n        }\r\n\r\n        this.setState({openSnackbar: true, note: message});\r\n    };\r\n\r\n    handleClickOutside = (index) => {\r\n        if (this.state.addOpenedIndex >= 0) {\r\n            let array = this.state.films;\r\n            array.forEach((film) => {\r\n                film.add = false;\r\n            });\r\n            this.setState({films: array, addOpenedIndex: index})\r\n        }\r\n    };\r\n\r\n    handleCreatePlaylistClick = () => {\r\n        this.setState({addOpenedIndex: -1});\r\n    };\r\n\r\n    handleAddPlaylistButtonClick = (index) => {\r\n        let array = this.state.films;\r\n        array[index].add = !array[index].add;\r\n\r\n        this.setState({films: array, addOpenedIndex: index})\r\n\r\n    };\r\n\r\n    handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        this.setState({openSnackbar: false});\r\n    };\r\n\r\n    setRedirect = (filmID, playlistID) => {\r\n        playlistID ?\r\n            this.props.history.push({\r\n                pathname: `${pathName}film/` + filmID,\r\n                search: `?list=${playlistID}`\r\n            })\r\n            :\r\n            this.props.history.push({\r\n                pathname: `${pathName}film/` + filmID\r\n            });\r\n    };\r\n\r\n    handleRemovePlaylist = (id, index) => {\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.delete(`${config.apiUrl}playlists/${id}`, requestParams)\r\n            .then(res => {\r\n                console.log(res);\r\n                let playlists = this.state.playlists;\r\n                playlists.splice(index, 1);\r\n\r\n                this.setState({playlists: playlists, openSnackbar: true, note: \"Playlist removed successfully!\"});\r\n            }).catch(err => {\r\n            console.log(err);\r\n        })\r\n    };\r\n\r\n    handleRemoveFilm = (id, index) => {\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        axios.delete(`${config.apiUrl}films/${id}`, requestParams)\r\n            .then(res => {\r\n\r\n                let films = this.state.films;\r\n                films.splice(index, 1);\r\n\r\n                this.setState({films: films, openSnackbar: true, note: \"Film removed successfully!\"});\r\n            }).catch(err => {\r\n            console.log(JSON.stringify(err));\r\n        })\r\n    };\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            films: [],\r\n            playlists: [],\r\n\r\n            user: {},\r\n\r\n            addOpenedIndex: -1,\r\n\r\n            redirect: false,\r\n\r\n            clickedOutside: false,\r\n\r\n            error: false,\r\n            isLoading: false,\r\n\r\n            scroll: {},\r\n\r\n            windowWidth: window.innerWidth,\r\n\r\n            openSnackbar: false,\r\n            note: ''\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        window.addEventListener('scroll', this.handleScroll);\r\n        window.addEventListener('resize', this.handleResize);\r\n\r\n        const requestParams = {\r\n            headers: authHeader()\r\n        };\r\n\r\n        if (localStorage.getItem('user')) {\r\n\r\n            axios.get(`${config.apiUrl}users/me`, requestParams)\r\n                .then().catch(err => {\r\n                console.log(err);\r\n                console.log(JSON.stringify(err));\r\n                this.props.dispatch(userActions.logout());\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            scroll: {\r\n                scrollTop: document.documentElement.scrollTop,\r\n                offsetHeight: document.documentElement.offsetHeight,\r\n                innerHeight: window.innerHeight\r\n            }\r\n        });\r\n\r\n\r\n        this.setState({isLoading: true}, async () => {\r\n\r\n            const requestOptions = {headers: authHeader()};\r\n\r\n            await axios.get(`${config.apiUrl}users/me/films`, requestOptions)\r\n                .then(response => {\r\n\r\n                    let films = response.data;\r\n\r\n                    console.log(\"FILMS \", films);\r\n\r\n                    films.forEach(film => {\r\n                        film.add = false;\r\n                    });\r\n\r\n                    this.setState({\r\n                        films: films,\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    console.log(JSON.stringify(err));\r\n                });\r\n\r\n\r\n            await axios.get(`${config.apiUrl}users/me/playlists`, requestOptions)\r\n                .then(response => {\r\n\r\n                    let playlists = response.data;\r\n\r\n                    this.setState({\r\n                        isLoading: false,\r\n                        isLoaded: true,\r\n                        playlists: playlists\r\n                    })\r\n\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        error: err.message,\r\n                        isLoading: false,\r\n                        isLoaded: true,\r\n                    })\r\n                });\r\n        });\r\n\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n        window.removeEventListener('resize', this.handleResize);\r\n    }\r\n\r\n    render() {\r\n        const {isLoading} = this.state;\r\n        const {scroll} = this.state;\r\n\r\n        return (\r\n            <Col>\r\n\r\n\r\n                <Row className=\"mt-5\">\r\n\r\n                    {\r\n                        this.state.films.map((film, index) => {\r\n\r\n                            const filmID = film.id;\r\n\r\n\r\n                            return <Col className=\"mb-5 film-preview-holder playlist-remove-container\" xs={6} sm={4} md={3} lg={2} key={film.id}>\r\n                                <div className=\"embed-responsive embed-responsive-16by9 z-depth-1-half container\">\r\n                                    {\r\n                                        <img\r\n                                            alt=\"\"\r\n                                            className=\"embed-responsive-item image\"\r\n                                            src={`${config.apiUrl}films/${film.id}/thumbnail/${film.thumbnail._id}?width=250`}\r\n                                            onClick={() => this.setRedirect(filmID)}/>\r\n                                    }\r\n                                    <FontAwesomeIcon className=\"middle\" icon=\"play\"\r\n                                                     onClick={() => this.setRedirect(filmID)}/>\r\n\r\n                                </div>\r\n\r\n                                <Row className=\"m-0\">\r\n                                    <Col xs={8} sm={8} className=\"p-0\">\r\n\r\n                                        <TextTruncate line={2} text={film.title}\r\n                                                      id=\"s-c-2\"\r\n                                                      className=\"mb-1 mt-1 title \"/>\r\n\r\n                                    </Col>\r\n\r\n                                    <Col xs={1} sm={1} style={{height: 24 + 'px', position: 'absolute', right: 28}}\r\n                                         className={\"playlist-remove-holder p-0 d-flex text-center justify-content-center align-items-center\"}\r\n                                         onClick={() => this.handleRemoveFilm(film.id, index)}>\r\n                                        <FontAwesomeIcon\r\n                                            icon=\"trash-alt\"/>\r\n                                    </Col>\r\n\r\n                                    <Col xs={1} sm={1} className=\"p-0\" style={{position: 'absolute', right: 8}}>\r\n                                        <PlaylistAddButtonComponent\r\n                                            parentName=\"profile\"\r\n                                            filmID={film.id}\r\n                                            filmTitle={film.title}\r\n                                            show={film.add} index={index}\r\n                                            handleAddPlaylistButtonClick={this.handleAddPlaylistButtonClick}\r\n                                            handleClick={this.handleCreatePlaylistClick}\r\n                                            handleClickOutside={this.handleClickOutside}\r\n                                            handlePlaylistOperation={this.handlePlaylistOperation}/>\r\n                                    </Col>\r\n\r\n\r\n                                </Row>\r\n                                <p className=\"mb-0 mt-1 film-views\">\r\n                                    <small>{film.views} views</small>\r\n                                </p>\r\n\r\n                            </Col>\r\n\r\n\r\n                        })\r\n                    }\r\n\r\n                    {\r\n                        this.state.playlists.map((playlist, index) => {\r\n\r\n                            const filmID = playlist.films[0];\r\n                            const playlistID = playlist.id;\r\n\r\n\r\n                            return <Col className=\"mb-5 playlist-remove-container\" xs={6} sm={4} md={3} lg={2}\r\n                                        key={playlist.id}>\r\n                                <div onClick={() => this.setRedirect(filmID, playlistID)}\r\n                                     className=\"embed-responsive embed-responsive-16by9 z-depth-1-half container\">\r\n                                    {\r\n                                        <img alt=\"\"\r\n                                             className=\"embed-responsive-item image\"\r\n                                             src={`${config.apiUrl}films/${filmID}/thumbnail/${playlist.thumbnail}?width=250`}\r\n                                             />\r\n                                    }\r\n                                    <Row className=\"middle\">\r\n                                        <Col xs={4} sm={4}>\r\n                                            <FontAwesomeIcon icon=\"play\" />\r\n                                        </Col>\r\n                                        <Col xs={8} sm={8}>\r\n                                            <small className=\"font-weight-bold\">Play all</small>\r\n\r\n                                        </Col>\r\n                                    </Row>\r\n\r\n\r\n                                </div>\r\n                                <Row className=\"p-0 m-0\">\r\n                                    <Col className=\"p-0 m-0 \">\r\n                                        <p className=\"mb-1\">\r\n                                            <small className=\"font-weight-bolder\">{playlist.title}</small>\r\n                                        </p>\r\n                                    </Col>\r\n                                    <Col xs={2} sm={2} className={\r\n                                        \"playlist-remove-holder m-0 p-0 text-center justify-content-center d-flex align-items-center\"}\r\n                                         onClick={() => this.handleRemovePlaylist(playlist.id, index)}>\r\n                                        <FontAwesomeIcon icon=\"trash-alt\"/>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <p className=\"mb-0 author-nick\">\r\n                                    <small>{playlist.authorName}</small>\r\n                                </p>\r\n\r\n                            </Col>\r\n\r\n\r\n                        })\r\n                    }\r\n\r\n                </Row>\r\n\r\n                {\r\n                    ((scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) && this.state.hasMore) &&\r\n                    <Col sm={12} className=\"text-center\">\r\n                        <Button\r\n                            className=\"button-my\"\r\n                            variant=\"contained\"\r\n                            disabled={isLoading}\r\n                            onClick={!isLoading ? this.loadData : null}\r\n                        >\r\n                            {isLoading ? 'Loading' : 'Click to load'}\r\n                        </Button>\r\n                    </Col>\r\n\r\n\r\n                }\r\n\r\n                {\r\n\r\n\r\n                    <Col style={{height: 40}} sm={12} className=\"text-center\">\r\n                        {!(scroll.scrollTop === 0 || scroll.offsetHeight <= scroll.innerHeight) &&\r\n                        this.state.isLoading &&\r\n                        <Spinner animation=\"border\"/>\r\n                        }\r\n                    </Col>\r\n                }\r\n\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.state.openSnackbar}\r\n                    autoHideDuration={3000}\r\n                    onClose={this.handleClose}\r\n                    ContentProps={{\r\n                        'aria-describedby': 'message-id',\r\n                    }}\r\n                    message={<span id=\"message-id\">{this.state.note}</span>}\r\n                />\r\n            </Col>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const {loggedIn} = state.auth;\r\n    return {\r\n        loggedIn\r\n    };\r\n}\r\n\r\nconst connectedProfileComponent = connect(mapStateToProps)(ProfileComponent);\r\n\r\n\r\nexport {connectedProfileComponent as ProfileComponent};\r\n","import React, {Component} from 'react';\nimport './App.css';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport {NavbarComponent} from './components/Navbar/NavbarComponent';\n\nimport {HomeComponent} from './components/Home/HomeComponent';\nimport {FilmComponent} from './components/Film/FilmComponent';\nimport {LoginComponent} from './components/Login/LoginComponent';\nimport {RegisterComponent} from './components/Register/RegisterComponent';\nimport {SearchComponent} from './components/Search/SearchComponent';\nimport {AllPlaylistsComponent} from './components/Playlist/AllPlaylistsComponent';\nimport {AddFilmComponent} from './components/AddFilm/AddFilmComponent';\nimport NotFoundComponent from './components/NotFound/NotFoundComponent';\n\nimport {Route, Router} from 'react-router-dom';\n\n\nimport {history} from './helpers';\nimport {alertActions, userActions} from './actions';\nimport {connect} from 'react-redux';\n//  --------- icons ------------\nimport {library} from '@fortawesome/fontawesome-svg-core'\nimport {\n    faCaretDown,\n    faCaretUp,\n    faEllipsisV,\n    faEye,\n    faFilter,\n    faPlay,\n    faPlus,\n    faSearch,\n    faThumbsDown,\n    faThumbsUp,\n    faSortUp,\n    faSortDown,\n    faTrashAlt\n} from '@fortawesome/free-solid-svg-icons'\nimport {Switch} from \"react-router\";\nimport {ResetPasswordComponent} from './components/ResetPassword/ResetPasswordComponent';\nimport {ForgotPasswordComponent} from './components/ResetPassword/ForgotPasswordComponent';\nimport {PrivateRoute} from './helpers/PrivateRoute';\nimport {ProfileComponent} from './components/Profile/ProfileComponent';\n\nimport {config} from './config';\n\nlibrary.add(faSearch, faPlus, faThumbsUp, faThumbsDown, faEye, faPlay, faFilter, faCaretUp, faCaretDown, faEllipsisV,\n    faSortDown, faSortUp, faTrashAlt);\n\nconst pathName = config.pathName;\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        const {dispatch} = this.props;\n\n        history.listen((location, action) => {\n            // clear alert on location change\n            console.log(\"LOCATION\", location);\n            dispatch(userActions.rate('CHECK_RATE'));\n            dispatch(alertActions.clear());\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                <Router history={history}>\n\n                    <Route  component={() => <NavbarComponent location={history.location} history={history}/>}/>\n\n                    <Route exact path={[`${pathName}login`, `${pathName}film/:id/login`, `${pathName}search/login`, `${pathName}add/login`, `${pathName}playlists/login`]}\n                           component={LoginComponent}/>\n\n                    <Route exact path={[`${pathName}register`, `${pathName}film/:id/register`, `${pathName}search/register`, `${pathName}add/register`, `${pathName}playlists/register`]}\n                           component={RegisterComponent}/>\n\n                    <Route exact path={[`${pathName}reset/:token`, `${pathName}film/:id/reset/:token`, `${pathName}search/reset/:token`, `${pathName}add/reset/:token`, `${pathName}playlists/reset/:token`]}\n                           component={ResetPasswordComponent}/>\n\n                    <Route exact path={[`${pathName}forgot`, `${pathName}film/:id/forgot`, `${pathName}search/forgot`, `${pathName}add/forgot`, `${pathName}playlists/forgot`]}\n                           component={ForgotPasswordComponent}/>\n\n                    <Switch>\n\n                        <Route exact path={[`${pathName}film/:id`, `${pathName}film/:id/login`, `${pathName}film/:id/register`, `${pathName}film/:id/reset/:token`,\n                            `${pathName}film/:id/forgot`]} component={FilmComponent}/>\n\n                        <Route exact path={[`${pathName}`, `${pathName}login`, `${pathName}register`,\n                            `${pathName}reset/:token`, `${pathName}forgot`]} component={HomeComponent}/>\n\n                        <Route exact path={[`${pathName}search`, `${pathName}search/login`, `${pathName}search/register`, `${pathName}search/reset/:token`, `${pathName}search/forgot`]} component={SearchComponent}/>\n\n                        <Route exact path={[`${pathName}add`, `${pathName}add/login`, `${pathName}add/register`, `${pathName}add/reset/:token`, `${pathName}add/forgot`]} component={AddFilmComponent}/>\n\n                        <Route exact path={[`${pathName}playlists`, `${pathName}playlists/login`, `${pathName}playlists/register`, `${pathName}playlists/reset/:token`,\n                            `${pathName}playlists/forgot`]} component={AllPlaylistsComponent}/>\n\n                        <PrivateRoute exact path={[`${pathName}profile`]} component={ProfileComponent} />\n\n                        <Route exact path=\"*\" component={NotFoundComponent}/>\n\n                    </Switch>\n                </Router>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    const {alert} = state;\n    return {\n        alert\n    }\n}\n\nconst connectedApp = connect(mapStateToProps)(App);\n\nexport {connectedApp as App};\n\n","const isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import \"es6-promise\";\nimport \"isomorphic-fetch\";\n\nimport 'react-app-polyfill/ie9';\nimport 'react-app-polyfill/ie11';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport { store } from \"./helpers\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}